{"ast":null,"code":"var _jsxFileName = \"/Users/kakalee/Desktop/May projects/lucky-star-jar/src/StarJar.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport { motion, useAnimation } from 'framer-motion';\nimport compliments from './complimentData';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst maskImageSrc = '/jar/spawn-mask.png';\nconst createMaskContext = () => {\n  return new Promise(resolve => {\n    const img = new Image();\n    img.crossOrigin = 'anonymous';\n    img.src = maskImageSrc;\n    img.onload = () => {\n      const canvas = document.createElement('canvas');\n      canvas.width = 300;\n      canvas.height = 300;\n      const ctx = canvas.getContext('2d');\n      if (ctx) ctx.drawImage(img, 0, 0, 300, 300);\n      resolve(ctx);\n    };\n    img.onerror = () => {\n      resolve(null);\n    };\n  });\n};\nconst getNonOverlappingPosition = async (existing, radius = 32) => {\n  const ctx = await createMaskContext();\n  if (!ctx) return {\n    x: 150,\n    y: 180\n  };\n  const halfSize = radius / 2;\n  let attempts = 0;\n  while (attempts < 1000) {\n    const x = Math.floor(Math.random() * 300);\n    const y = Math.floor(Math.random() * 300);\n    const corners = [{\n      x: x - halfSize,\n      y: y - halfSize\n    }, {\n      x: x + halfSize,\n      y: y - halfSize\n    }, {\n      x: x - halfSize,\n      y: y + halfSize\n    }, {\n      x: x + halfSize,\n      y: y + halfSize\n    }];\n    const allValid = corners.every(({\n      x,\n      y\n    }) => {\n      if (x < 0 || x >= 300 || y < 0 || y >= 300) return false;\n      const pixel = ctx.getImageData(x, y, 1, 1).data;\n      return pixel[3] >= 50;\n    });\n    const notTooClose = existing.every(pos => {\n      const dx = pos.x - x;\n      const dy = pos.y - y;\n      return dx * dx + dy * dy > radius * radius;\n    });\n    if (allValid && notTooClose) return {\n      x,\n      y\n    };\n    attempts++;\n  }\n  return {\n    x: 150,\n    y: 180\n  };\n};\nconst Star = /*#__PURE__*/_s(/*#__PURE__*/React.forwardRef(_c = _s(({\n  src,\n  x,\n  y,\n  updateFinalPosition\n}, ref) => {\n  _s();\n  const controls = useAnimation();\n  const [mounted, setMounted] = useState(false);\n  useEffect(() => {\n    controls.start({\n      x: x - 16,\n      y: y - 16,\n      scale: [0, 1.2, 1],\n      transition: {\n        duration: 0.0,\n        ease: \"easeOut\"\n      }\n    });\n    setMounted(true);\n  }, [x, y]);\n  React.useImperativeHandle(ref, () => ({\n    async shake() {\n      if (!mounted) return;\n      const ctx = await createMaskContext();\n      if (!ctx) return;\n      const starSize = 32;\n      const halfSize = starSize / 2;\n      let finalX = x;\n      let finalY = y;\n      for (let i = 0; i < 8; i++) {\n        let newX = finalX + (Math.random() - 0.5) * 20;\n        let newY = finalY + (Math.random() - 0.5) * 20;\n        const corners = [{\n          x: newX - halfSize,\n          y: newY - halfSize\n        }, {\n          x: newX + halfSize,\n          y: newY - halfSize\n        }, {\n          x: newX - halfSize,\n          y: newY + halfSize\n        }, {\n          x: newX + halfSize,\n          y: newY + halfSize\n        }];\n        const isValid = corners.every(({\n          x,\n          y\n        }) => {\n          if (x < 0 || x >= 300 || y < 0 || y >= 300) return false;\n          const pixel = ctx.getImageData(x, y, 1, 1).data;\n          return pixel[3] >= 50;\n        });\n        if (!isValid) continue;\n        await controls.start({\n          x: newX - 16,\n          y: newY - 16,\n          transition: {\n            duration: 0.08\n          }\n        });\n        finalX = newX;\n        finalY = newY;\n      }\n      await controls.start({\n        x: finalX - 16,\n        y: finalY - 16,\n        transition: {\n          duration: 0.4,\n          ease: 'easeOut'\n        }\n      });\n      updateFinalPosition(finalX, finalY);\n    }\n  }));\n  return /*#__PURE__*/_jsxDEV(motion.img, {\n    src: src,\n    alt: \"star\",\n    className: \"absolute w-8 h-8 pointer-events-none\",\n    animate: controls,\n    initial: {\n      x: x - 16,\n      y: y - 16,\n      scale: 0\n    },\n    style: {\n      zIndex: 5\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 5\n  }, this);\n}, \"4/eOyma7uldJEH0S2azixDo/B60=\", false, function () {\n  return [useAnimation];\n})), \"4/eOyma7uldJEH0S2azixDo/B60=\", false, function () {\n  return [useAnimation];\n});\n_c2 = Star;\nexport default function StarJar({\n  onComplimentUnlocked\n}) {\n  _s2();\n  const [stars, setStars] = useState([]);\n  const [hasSpawned, setHasSpawned] = useState(false);\n  const [wish, setWish] = useState('');\n  const [showVideo, setShowVideo] = useState(false);\n  const starRefs = useRef([]);\n  const [showResetModal, setShowResetModal] = useState(false);\n  const [passwordInput, setPasswordInput] = useState('');\n  useEffect(() => {\n    const saved = JSON.parse(localStorage.getItem('jarStars') || '[]');\n    if (saved.length > 0) {\n      setStars(saved);\n      setHasSpawned(true);\n      starRefs.current = saved.map(() => /*#__PURE__*/React.createRef());\n    }\n  }, []);\n  useEffect(() => {\n    if (hasSpawned) {\n      localStorage.setItem('jarStars', JSON.stringify(stars));\n    }\n  }, [stars, hasSpawned]);\n  const spawnStars = async () => {\n    const generated = [];\n    for (let i = 0; i < compliments.length; i++) {\n      const pos = await getNonOverlappingPosition(generated);\n      generated.push({\n        id: `star-${i}`,\n        src: compliments[i].image,\n        x: pos.x,\n        y: pos.y,\n        compliment: compliments[i].text\n      });\n    }\n    setStars(generated);\n    setHasSpawned(true);\n    setWish('');\n    setShowVideo(false);\n    starRefs.current = generated.map(() => /*#__PURE__*/React.createRef());\n    localStorage.setItem('jarStars', JSON.stringify(generated));\n  };\n  const updateStarPosition = (index, x, y) => {\n    setStars(prev => {\n      const updated = [...prev];\n      updated[index] = {\n        ...updated[index],\n        x,\n        y\n      };\n      return updated;\n    });\n  };\n  const shakeStars = async () => {\n    await Promise.all(starRefs.current.map(ref => {\n      var _ref$current, _ref$current$shake;\n      return (_ref$current = ref.current) === null || _ref$current === void 0 ? void 0 : (_ref$current$shake = _ref$current.shake) === null || _ref$current$shake === void 0 ? void 0 : _ref$current$shake.call(_ref$current);\n    }));\n  };\n  const makeWish = async () => {\n    var _compliments$find;\n    if (!hasSpawned || stars.length === 0) return;\n    const selectedIndex = Math.floor(Math.random() * stars.length);\n    const selectedStar = stars[selectedIndex];\n    await shakeStars(); // ðŸ”„ Do shaking first before mutation\n\n    // â—Ensure compliment is correct\n    const complimentText = (_compliments$find = compliments.find(c => c.image === selectedStar.src)) === null || _compliments$find === void 0 ? void 0 : _compliments$find.text;\n    if (!complimentText) return;\n\n    // ðŸ”„ Now remove from refs + state\n    starRefs.current.splice(selectedIndex, 1);\n    setStars(prev => {\n      const updated = [...prev];\n      updated.splice(selectedIndex, 1);\n      localStorage.setItem('jarStars', JSON.stringify(updated));\n      return updated;\n    });\n\n    // ðŸ—‚ï¸ Update Dex\n    const prev = JSON.parse(localStorage.getItem('unlockedCompliments') || '[]');\n    const updated = [...new Set([...prev, complimentText])];\n    localStorage.setItem('unlockedCompliments', JSON.stringify(updated));\n    setWish(complimentText);\n    setShowVideo(true);\n  };\n  const resetJar = () => {\n    localStorage.removeItem('jarStars');\n    localStorage.removeItem('unlockedCompliments');\n    setStars([]);\n    setHasSpawned(false);\n    setWish(null);\n    setShowVideo(false);\n    setSelectedCompliment(null);\n    setPasswordInput('');\n    setShowResetModal(false);\n    starRefs.current = [];\n  };\n  const [selectedCompliment, setSelectedCompliment] = useState(null);\n  const handlePasswordSubmit = () => {\n    if (passwordInput === 'kakalove0608') {\n      resetJar();\n    } else {\n      alert('Why you trying to break the law');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col items-center mt-10\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative w-[300px] h-[300px]\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"/jar/back.png\",\n        alt: \"jar back\",\n        className: \"absolute inset-0 w-full h-full object-contain z-0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this), stars.map((star, i) => star !== null && star !== void 0 && star.src ?\n      /*#__PURE__*/\n      // âœ… Prevent broken image rendering\n      _jsxDEV(Star, {\n        src: star.src,\n        x: star.x,\n        y: star.y,\n        ref: starRefs.current[i],\n        updateFinalPosition: (x, y) => updateStarPosition(i, x, y)\n      }, star.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 13\n      }, this) : null), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"/jar/lid.png\",\n        alt: \"jar lid\",\n        className: \"absolute inset-0 w-full h-full object-contain z-10\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-4 mt-6 flex-wrap justify-center\",\n      children: !hasSpawned ? /*#__PURE__*/_jsxDEV(motion.button, {\n        className: \"bg-[#D8D1EF] hover:bg-[#CFC6EA] text-[#5C5575] text-lg px-6 py-3 rounded-full shadow-md font-semibold transition hover:scale-105 duration-200 ease-out backdrop-blur-sm border border-[#E9E3F9]\",\n        onClick: spawnStars,\n        children: \"Press me!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 10\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(motion.button, {\n          className: \"bg-white/30 backdrop-blur-md border border-[#D1D9EC] text-sm text-[#555] px-4 py-2 rounded-full shadow-sm hover:bg-white/50 hover:scale-105 transition\",\n          onClick: shakeStars,\n          children: \"Shake me\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(motion.button, {\n          className: \"bg-[#bdaddb] hover:bg-[#b2d0f7] text-white  text-lg px-6 py-3 rounded-full font-semibold  shadow-md transition hover:scale-105 disabled:opacity-50\",\n          onClick: makeWish,\n          disabled: stars.length === 0,\n          children: \"Make a wish! \\u2728\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-7 text-center h-24 flex items-center justify-center\",\n      children: [showVideo && /*#__PURE__*/_jsxDEV(\"video\", {\n        playsInline: true,\n        autoPlay: true,\n        muted: true,\n        disablePictureInPicture: true,\n        className: \"w-49 h-36 object-contain\",\n        onEnded: () => setShowVideo(false),\n        children: [/*#__PURE__*/_jsxDEV(\"source\", {\n          src: \"/stars/unravel.mp4\",\n          type: \"video/mp4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 13\n        }, this), \"Your browser does not support the video tag.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 11\n      }, this), !showVideo && wish && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center flex flex-col items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-[#6D679D] text-xl font-semibold\",\n          children: [\"\\u2728 \", wish, \" \\u2728\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            const complimentObj = compliments.find(c => c.text === wish);\n            setSelectedCompliment({\n              text: (complimentObj === null || complimentObj === void 0 ? void 0 : complimentObj.text) || wish,\n              image: (complimentObj === null || complimentObj === void 0 ? void 0 : complimentObj.image) || '/stars/default.png',\n              description: (complimentObj === null || complimentObj === void 0 ? void 0 : complimentObj.description) || 'This star reflects one of your amazing qualities ðŸ’« Keep collecting more!',\n              locked: false\n            });\n          },\n          className: \"mt-1 px-3 py-1 rounded-full text-sm bg-white text-[#6D679D] border border-[#d6d2e8] hover:bg-[#f3f0fa] transition\",\n          children: \"Read more\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 7\n    }, this), selectedCompliment && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30 backdrop-blur-sm\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-lg p-6 max-w-sm w-full relative text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"absolute top-2 right-2 text-gray-400 hover:text-gray-600\",\n          onClick: () => setSelectedCompliment(null),\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: selectedCompliment.image,\n          alt: selectedCompliment.text,\n          className: \"w-16 h-16 mx-auto mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-bold text-[#6D679D]\",\n          children: selectedCompliment.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500 mt-2\",\n          children: selectedCompliment.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 9\n    }, this), hasSpawned && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"fixed bottom-4 right-4 bg-[#D3DCE6] hover:bg-[#C6D0DB] text-sm text-black px-4 py-2 rounded-full shadow z-50\",\n      onClick: () => setShowResetModal(true),\n      children: \"Reset Jar\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 9\n    }, this), showResetModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-6 rounded-lg shadow-lg w-80 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold mb-4\",\n          children: \"Enter password to reset\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          value: passwordInput,\n          onChange: e => setPasswordInput(e.target.value),\n          className: \"w-full px-3 py-2 border border-gray-300 rounded mb-4\",\n          placeholder: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-center gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"bg-gray-300 hover:bg-gray-400 text-black px-4 py-2 rounded\",\n            onClick: () => setShowResetModal(false),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded\",\n            onClick: handlePasswordSubmit,\n            children: \"Confirm\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 257,\n    columnNumber: 5\n  }, this);\n}\n_s2(StarJar, \"lhYIDgWguMgtu8ejywi9jRlStGM=\");\n_c3 = StarJar;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"Star$React.forwardRef\");\n$RefreshReg$(_c2, \"Star\");\n$RefreshReg$(_c3, \"StarJar\");","map":{"version":3,"names":["React","useEffect","useState","useRef","motion","useAnimation","compliments","jsxDEV","_jsxDEV","Fragment","_Fragment","maskImageSrc","createMaskContext","Promise","resolve","img","Image","crossOrigin","src","onload","canvas","document","createElement","width","height","ctx","getContext","drawImage","onerror","getNonOverlappingPosition","existing","radius","x","y","halfSize","attempts","Math","floor","random","corners","allValid","every","pixel","getImageData","data","notTooClose","pos","dx","dy","Star","_s","forwardRef","_c","updateFinalPosition","ref","controls","mounted","setMounted","start","scale","transition","duration","ease","useImperativeHandle","shake","starSize","finalX","finalY","i","newX","newY","isValid","alt","className","animate","initial","style","zIndex","fileName","_jsxFileName","lineNumber","columnNumber","_c2","StarJar","onComplimentUnlocked","_s2","stars","setStars","hasSpawned","setHasSpawned","wish","setWish","showVideo","setShowVideo","starRefs","showResetModal","setShowResetModal","passwordInput","setPasswordInput","saved","JSON","parse","localStorage","getItem","length","current","map","createRef","setItem","stringify","spawnStars","generated","push","id","image","compliment","text","updateStarPosition","index","prev","updated","shakeStars","all","_ref$current","_ref$current$shake","call","makeWish","_compliments$find","selectedIndex","selectedStar","complimentText","find","c","splice","Set","resetJar","removeItem","setSelectedCompliment","selectedCompliment","handlePasswordSubmit","alert","children","star","button","onClick","disabled","playsInline","autoPlay","muted","disablePictureInPicture","onEnded","type","complimentObj","description","locked","value","onChange","e","target","placeholder","_c3","$RefreshReg$"],"sources":["/Users/kakalee/Desktop/May projects/lucky-star-jar/src/StarJar.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { motion, useAnimation } from 'framer-motion';\n\nimport compliments from './complimentData'; \n\nconst maskImageSrc = '/jar/spawn-mask.png';\n\nconst createMaskContext = () => {\n  return new Promise((resolve) => {\n    const img = new Image();\n    img.crossOrigin = 'anonymous';\n    img.src = maskImageSrc;\n\n    img.onload = () => {\n      const canvas = document.createElement('canvas');\n      canvas.width = 300;\n      canvas.height = 300;\n      const ctx = canvas.getContext('2d');\n      if (ctx) ctx.drawImage(img, 0, 0, 300, 300);\n      resolve(ctx);\n    };\n\n    img.onerror = () => {\n      resolve(null);\n    };\n  });\n};\n\nconst getNonOverlappingPosition = async (existing, radius = 32) => {\n  const ctx = await createMaskContext();\n  if (!ctx) return { x: 150, y: 180 };\n\n  const halfSize = radius / 2;\n  let attempts = 0;\n\n  while (attempts < 1000) {\n    const x = Math.floor(Math.random() * 300);\n    const y = Math.floor(Math.random() * 300);\n\n    const corners = [\n      { x: x - halfSize, y: y - halfSize },\n      { x: x + halfSize, y: y - halfSize },\n      { x: x - halfSize, y: y + halfSize },\n      { x: x + halfSize, y: y + halfSize },\n    ];\n\n    const allValid = corners.every(({ x, y }) => {\n      if (x < 0 || x >= 300 || y < 0 || y >= 300) return false;\n      const pixel = ctx.getImageData(x, y, 1, 1).data;\n      return pixel[3] >= 50;\n    });\n\n    const notTooClose = existing.every((pos) => {\n      const dx = pos.x - x;\n      const dy = pos.y - y;\n      return dx * dx + dy * dy > radius * radius;\n    });\n\n    if (allValid && notTooClose) return { x, y };\n    attempts++;\n  }\n\n  return { x: 150, y: 180 };\n};\n\nconst Star = React.forwardRef(({ src, x, y, updateFinalPosition }, ref) => {\n  const controls = useAnimation();\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    controls.start({\n      x: x - 16,\n      y: y - 16,\n      scale: [0, 1.2, 1],\n      transition: { duration: 0.0, ease: \"easeOut\" }\n    });\n    setMounted(true);\n  }, [x, y]);\n\n  React.useImperativeHandle(ref, () => ({\n    async shake() {\n      if (!mounted) return;\n\n      const ctx = await createMaskContext();\n      if (!ctx) return;\n\n      const starSize = 32;\n      const halfSize = starSize / 2;\n\n      let finalX = x;\n      let finalY = y;\n\n      for (let i = 0; i < 8; i++) {\n        let newX = finalX + (Math.random() - 0.5) * 20;\n        let newY = finalY + (Math.random() - 0.5) * 20;\n\n        const corners = [\n          { x: newX - halfSize, y: newY - halfSize },\n          { x: newX + halfSize, y: newY - halfSize },\n          { x: newX - halfSize, y: newY + halfSize },\n          { x: newX + halfSize, y: newY + halfSize },\n        ];\n\n        const isValid = corners.every(({ x, y }) => {\n          if (x < 0 || x >= 300 || y < 0 || y >= 300) return false;\n          const pixel = ctx.getImageData(x, y, 1, 1).data;\n          return pixel[3] >= 50;\n        });\n\n        if (!isValid) continue;\n\n        await controls.start({\n          x: newX - 16,\n          y: newY - 16,\n          transition: { duration: 0.08 }\n        });\n\n        finalX = newX;\n        finalY = newY;\n      }\n\n      await controls.start({\n        x: finalX - 16,\n        y: finalY - 16,\n        transition: { duration: 0.4, ease: 'easeOut' }\n      });\n\n      updateFinalPosition(finalX, finalY);\n    }\n  }));\n\n  return (\n    <motion.img\n      src={src}\n      alt=\"star\"\n      className=\"absolute w-8 h-8 pointer-events-none\"\n      animate={controls}\n      initial={{ x: x - 16, y: y - 16, scale: 0 }}\n      style={{ zIndex: 5 }}\n    />\n  );\n});\n\nexport default function StarJar({ onComplimentUnlocked }) {\n  const [stars, setStars] = useState([]);\n  const [hasSpawned, setHasSpawned] = useState(false);\n  const [wish, setWish] = useState('');\n  const [showVideo, setShowVideo] = useState(false);\n  const starRefs = useRef([]);\n  const [showResetModal, setShowResetModal] = useState(false);\n  const [passwordInput, setPasswordInput] = useState('');\n\n  useEffect(() => {\n    const saved = JSON.parse(localStorage.getItem('jarStars') || '[]');\n    if (saved.length > 0) {\n      setStars(saved);\n      setHasSpawned(true);\n      starRefs.current = saved.map(() => React.createRef());\n    }\n  }, []);\n\n  useEffect(() => {\n    if (hasSpawned) {\n      localStorage.setItem('jarStars', JSON.stringify(stars));\n    }\n  }, [stars, hasSpawned]);\n\n  const spawnStars = async () => {\n    const generated = [];\n    for (let i = 0; i < compliments.length; i++) {\n      const pos = await getNonOverlappingPosition(generated);\n      generated.push({\n        id: `star-${i}`,\n        src: compliments[i].image,\n        x: pos.x,\n        y: pos.y,\n        compliment: compliments[i].text\n      });\n    }\n    setStars(generated);\n    setHasSpawned(true);\n    setWish('');\n    setShowVideo(false);\n    starRefs.current = generated.map(() => React.createRef());\n    localStorage.setItem('jarStars', JSON.stringify(generated));\n  };\n\n  const updateStarPosition = (index, x, y) => {\n    setStars((prev) => {\n      const updated = [...prev];\n      updated[index] = { ...updated[index], x, y };\n      return updated;\n    });\n  };\n\n  const shakeStars = async () => {\n    await Promise.all(\n      starRefs.current.map(ref => ref.current?.shake?.())\n    );\n  };\n\n  const makeWish = async () => {\n    if (!hasSpawned || stars.length === 0) return;\n  \n    const selectedIndex = Math.floor(Math.random() * stars.length);\n    const selectedStar = stars[selectedIndex];\n  \n    await shakeStars(); // ðŸ”„ Do shaking first before mutation\n  \n    // â—Ensure compliment is correct\n    const complimentText = compliments.find(c => c.image === selectedStar.src)?.text;\n    if (!complimentText) return;\n  \n    // ðŸ”„ Now remove from refs + state\n    starRefs.current.splice(selectedIndex, 1);\n    setStars((prev) => {\n      const updated = [...prev];\n      updated.splice(selectedIndex, 1);\n      localStorage.setItem('jarStars', JSON.stringify(updated));\n      return updated;\n    });\n  \n    // ðŸ—‚ï¸ Update Dex\n    const prev = JSON.parse(localStorage.getItem('unlockedCompliments') || '[]');\n    const updated = [...new Set([...prev, complimentText])];\n    localStorage.setItem('unlockedCompliments', JSON.stringify(updated));\n  \n    setWish(complimentText);\n    setShowVideo(true);\n\n  };  \n\n  const resetJar = () => {\n    localStorage.removeItem('jarStars');\n    localStorage.removeItem('unlockedCompliments');\n    setStars([]);\n    setHasSpawned(false);\n    setWish(null);\n    setShowVideo(false);\n    setSelectedCompliment(null);\n    setPasswordInput('');\n    setShowResetModal(false);\n    starRefs.current = [];\n  };\n\n  const [selectedCompliment, setSelectedCompliment] = useState(null);\n\n  const handlePasswordSubmit = () => {\n    if (passwordInput === 'kakalove0608') {\n      resetJar();\n    } else {\n      alert('Why you trying to break the law');\n    }\n  };\n  \n  return (\n    <div className=\"flex flex-col items-center mt-10\">\n      <div className=\"relative w-[300px] h-[300px]\">\n        <img src=\"/jar/back.png\" alt=\"jar back\" className=\"absolute inset-0 w-full h-full object-contain z-0\" />\n        {stars.map((star, i) =>\n          star?.src ? ( // âœ… Prevent broken image rendering\n            <Star\n              key={star.id}\n              src={star.src}\n              x={star.x}\n              y={star.y}\n              ref={starRefs.current[i]}\n              updateFinalPosition={(x, y) => updateStarPosition(i, x, y)}\n            />\n          ) : null\n        )}\n        <img src=\"/jar/lid.png\" alt=\"jar lid\" className=\"absolute inset-0 w-full h-full object-contain z-10\" />\n      </div>\n\n      <div className=\"flex gap-4 mt-6 flex-wrap justify-center\">\n        {!hasSpawned ? (\n         <motion.button\n         className=\"bg-[#D8D1EF] hover:bg-[#CFC6EA]\n                    text-[#5C5575] text-lg px-6 py-3 rounded-full\n                    shadow-md font-semibold transition\n                    hover:scale-105 duration-200 ease-out\n                    backdrop-blur-sm border border-[#E9E3F9]\"\n         onClick={spawnStars}\n       >\n         Press me!\n       </motion.button>\n       \n        ) : (\n          <>\n            <motion.button\n            className=\"bg-white/30 backdrop-blur-md\n                        border border-[#D1D9EC] text-sm text-[#555]\n                        px-4 py-2 rounded-full shadow-sm\n                        hover:bg-white/50 hover:scale-105 transition\"\n            onClick={shakeStars}\n            >\n            Shake me\n            </motion.button>\n\n            \n            <motion.button\n            className=\"bg-[#bdaddb] hover:bg-[#b2d0f7] text-white \n                        text-lg px-6 py-3 rounded-full font-semibold \n                        shadow-md transition hover:scale-105 disabled:opacity-50\"\n            onClick={makeWish}\n            disabled={stars.length === 0}\n            >\n            Make a wish! âœ¨\n            </motion.button>\n          </>\n        )}\n      </div>\n\n      <div className=\"mt-7 text-center h-24 flex items-center justify-center\">\n      {showVideo && (\n          <video\n            playsInline\n            autoPlay\n            muted\n            disablePictureInPicture\n            className=\"w-49 h-36 object-contain\"\n            onEnded={() => setShowVideo(false)}\n          >\n            <source src=\"/stars/unravel.mp4\" type=\"video/mp4\" />\n            Your browser does not support the video tag.\n          </video>\n        )}\n        {!showVideo && wish && (\n          <div className=\"text-center flex flex-col items-center gap-2\">\n            <p className=\"text-[#6D679D] text-xl font-semibold\">âœ¨ {wish} âœ¨</p>\n            <button\n              onClick={() => {\n                const complimentObj = compliments.find(c => c.text === wish);\n\n                setSelectedCompliment({\n                  text: complimentObj?.text || wish,\n                  image: complimentObj?.image || '/stars/default.png',\n                  description:\n                    complimentObj?.description ||\n                    'This star reflects one of your amazing qualities ðŸ’« Keep collecting more!',\n                  locked: false,\n                });\n              }}\n              className=\"mt-1 px-3 py-1 rounded-full text-sm bg-white text-[#6D679D] border border-[#d6d2e8] hover:bg-[#f3f0fa] transition\"\n            >\n              Read more\n            </button>\n          </div>\n        )}\n\n      </div>\n\n      {selectedCompliment && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30 backdrop-blur-sm\">\n          <div className=\"bg-white rounded-xl shadow-lg p-6 max-w-sm w-full relative text-center\">\n            <button\n              className=\"absolute top-2 right-2 text-gray-400 hover:text-gray-600\"\n              onClick={() => setSelectedCompliment(null)}\n            >\n              âœ•\n            </button>\n            <img\n              src={selectedCompliment.image}\n              alt={selectedCompliment.text}\n              className=\"w-16 h-16 mx-auto mb-4\"\n            />\n            <h3 className=\"text-lg font-bold text-[#6D679D]\">{selectedCompliment.text}</h3>\n            <p className=\"text-sm text-gray-500 mt-2\">\n            {selectedCompliment.description}\n            </p>\n          </div>\n        </div>\n      )}\n\n      {/* Reset Button Fixed Bottom Right */}\n      {hasSpawned && (\n        <button\n          className=\"fixed bottom-4 right-4 bg-[#D3DCE6] hover:bg-[#C6D0DB] text-sm text-black px-4 py-2 rounded-full shadow z-50\"\n          onClick={() => setShowResetModal(true)}\n        >\n          Reset Jar\n        </button>\n      )}\n\n      {/* Password Reset Modal */}\n      {showResetModal && (\n        <div className=\"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50\">\n          <div className=\"bg-white p-6 rounded-lg shadow-lg w-80 text-center\">\n            <h3 className=\"text-lg font-semibold mb-4\">Enter password to reset</h3>\n            <input\n              type=\"password\"\n              value={passwordInput}\n              onChange={(e) => setPasswordInput(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded mb-4\"\n              placeholder=\"Password\"\n            />\n            <div className=\"flex justify-center gap-4\">\n              <button\n                className=\"bg-gray-300 hover:bg-gray-400 text-black px-4 py-2 rounded\"\n                onClick={() => setShowResetModal(false)}\n              >\n                Cancel\n              </button>\n              <button\n                className=\"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded\"\n                onClick={handlePasswordSubmit}\n              >\n                Confirm\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n    </div>\n  );\n}\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AAC1D,SAASC,MAAM,EAAEC,YAAY,QAAQ,eAAe;AAEpD,OAAOC,WAAW,MAAM,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE3C,MAAMC,YAAY,GAAG,qBAAqB;AAE1C,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;EAC9B,OAAO,IAAIC,OAAO,CAAEC,OAAO,IAAK;IAC9B,MAAMC,GAAG,GAAG,IAAIC,KAAK,CAAC,CAAC;IACvBD,GAAG,CAACE,WAAW,GAAG,WAAW;IAC7BF,GAAG,CAACG,GAAG,GAAGP,YAAY;IAEtBI,GAAG,CAACI,MAAM,GAAG,MAAM;MACjB,MAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;MAC/CF,MAAM,CAACG,KAAK,GAAG,GAAG;MAClBH,MAAM,CAACI,MAAM,GAAG,GAAG;MACnB,MAAMC,GAAG,GAAGL,MAAM,CAACM,UAAU,CAAC,IAAI,CAAC;MACnC,IAAID,GAAG,EAAEA,GAAG,CAACE,SAAS,CAACZ,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC;MAC3CD,OAAO,CAACW,GAAG,CAAC;IACd,CAAC;IAEDV,GAAG,CAACa,OAAO,GAAG,MAAM;MAClBd,OAAO,CAAC,IAAI,CAAC;IACf,CAAC;EACH,CAAC,CAAC;AACJ,CAAC;AAED,MAAMe,yBAAyB,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,MAAM,GAAG,EAAE,KAAK;EACjE,MAAMN,GAAG,GAAG,MAAMb,iBAAiB,CAAC,CAAC;EACrC,IAAI,CAACa,GAAG,EAAE,OAAO;IAAEO,CAAC,EAAE,GAAG;IAAEC,CAAC,EAAE;EAAI,CAAC;EAEnC,MAAMC,QAAQ,GAAGH,MAAM,GAAG,CAAC;EAC3B,IAAII,QAAQ,GAAG,CAAC;EAEhB,OAAOA,QAAQ,GAAG,IAAI,EAAE;IACtB,MAAMH,CAAC,GAAGI,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,GAAG,CAAC;IACzC,MAAML,CAAC,GAAGG,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,GAAG,CAAC;IAEzC,MAAMC,OAAO,GAAG,CACd;MAAEP,CAAC,EAAEA,CAAC,GAAGE,QAAQ;MAAED,CAAC,EAAEA,CAAC,GAAGC;IAAS,CAAC,EACpC;MAAEF,CAAC,EAAEA,CAAC,GAAGE,QAAQ;MAAED,CAAC,EAAEA,CAAC,GAAGC;IAAS,CAAC,EACpC;MAAEF,CAAC,EAAEA,CAAC,GAAGE,QAAQ;MAAED,CAAC,EAAEA,CAAC,GAAGC;IAAS,CAAC,EACpC;MAAEF,CAAC,EAAEA,CAAC,GAAGE,QAAQ;MAAED,CAAC,EAAEA,CAAC,GAAGC;IAAS,CAAC,CACrC;IAED,MAAMM,QAAQ,GAAGD,OAAO,CAACE,KAAK,CAAC,CAAC;MAAET,CAAC;MAAEC;IAAE,CAAC,KAAK;MAC3C,IAAID,CAAC,GAAG,CAAC,IAAIA,CAAC,IAAI,GAAG,IAAIC,CAAC,GAAG,CAAC,IAAIA,CAAC,IAAI,GAAG,EAAE,OAAO,KAAK;MACxD,MAAMS,KAAK,GAAGjB,GAAG,CAACkB,YAAY,CAACX,CAAC,EAAEC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAACW,IAAI;MAC/C,OAAOF,KAAK,CAAC,CAAC,CAAC,IAAI,EAAE;IACvB,CAAC,CAAC;IAEF,MAAMG,WAAW,GAAGf,QAAQ,CAACW,KAAK,CAAEK,GAAG,IAAK;MAC1C,MAAMC,EAAE,GAAGD,GAAG,CAACd,CAAC,GAAGA,CAAC;MACpB,MAAMgB,EAAE,GAAGF,GAAG,CAACb,CAAC,GAAGA,CAAC;MACpB,OAAOc,EAAE,GAAGA,EAAE,GAAGC,EAAE,GAAGA,EAAE,GAAGjB,MAAM,GAAGA,MAAM;IAC5C,CAAC,CAAC;IAEF,IAAIS,QAAQ,IAAIK,WAAW,EAAE,OAAO;MAAEb,CAAC;MAAEC;IAAE,CAAC;IAC5CE,QAAQ,EAAE;EACZ;EAEA,OAAO;IAAEH,CAAC,EAAE,GAAG;IAAEC,CAAC,EAAE;EAAI,CAAC;AAC3B,CAAC;AAED,MAAMgB,IAAI,gBAAAC,EAAA,cAAGlD,KAAK,CAACmD,UAAU,CAAAC,EAAA,GAAAF,EAAA,CAAC,CAAC;EAAEhC,GAAG;EAAEc,CAAC;EAAEC,CAAC;EAAEoB;AAAoB,CAAC,EAAEC,GAAG,KAAK;EAAAJ,EAAA;EACzE,MAAMK,QAAQ,GAAGlD,YAAY,CAAC,CAAC;EAC/B,MAAM,CAACmD,OAAO,EAAEC,UAAU,CAAC,GAAGvD,QAAQ,CAAC,KAAK,CAAC;EAE7CD,SAAS,CAAC,MAAM;IACdsD,QAAQ,CAACG,KAAK,CAAC;MACb1B,CAAC,EAAEA,CAAC,GAAG,EAAE;MACTC,CAAC,EAAEA,CAAC,GAAG,EAAE;MACT0B,KAAK,EAAE,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC;MAClBC,UAAU,EAAE;QAAEC,QAAQ,EAAE,GAAG;QAAEC,IAAI,EAAE;MAAU;IAC/C,CAAC,CAAC;IACFL,UAAU,CAAC,IAAI,CAAC;EAClB,CAAC,EAAE,CAACzB,CAAC,EAAEC,CAAC,CAAC,CAAC;EAEVjC,KAAK,CAAC+D,mBAAmB,CAACT,GAAG,EAAE,OAAO;IACpC,MAAMU,KAAKA,CAAA,EAAG;MACZ,IAAI,CAACR,OAAO,EAAE;MAEd,MAAM/B,GAAG,GAAG,MAAMb,iBAAiB,CAAC,CAAC;MACrC,IAAI,CAACa,GAAG,EAAE;MAEV,MAAMwC,QAAQ,GAAG,EAAE;MACnB,MAAM/B,QAAQ,GAAG+B,QAAQ,GAAG,CAAC;MAE7B,IAAIC,MAAM,GAAGlC,CAAC;MACd,IAAImC,MAAM,GAAGlC,CAAC;MAEd,KAAK,IAAImC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;QAC1B,IAAIC,IAAI,GAAGH,MAAM,GAAG,CAAC9B,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,GAAG,IAAI,EAAE;QAC9C,IAAIgC,IAAI,GAAGH,MAAM,GAAG,CAAC/B,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,GAAG,IAAI,EAAE;QAE9C,MAAMC,OAAO,GAAG,CACd;UAAEP,CAAC,EAAEqC,IAAI,GAAGnC,QAAQ;UAAED,CAAC,EAAEqC,IAAI,GAAGpC;QAAS,CAAC,EAC1C;UAAEF,CAAC,EAAEqC,IAAI,GAAGnC,QAAQ;UAAED,CAAC,EAAEqC,IAAI,GAAGpC;QAAS,CAAC,EAC1C;UAAEF,CAAC,EAAEqC,IAAI,GAAGnC,QAAQ;UAAED,CAAC,EAAEqC,IAAI,GAAGpC;QAAS,CAAC,EAC1C;UAAEF,CAAC,EAAEqC,IAAI,GAAGnC,QAAQ;UAAED,CAAC,EAAEqC,IAAI,GAAGpC;QAAS,CAAC,CAC3C;QAED,MAAMqC,OAAO,GAAGhC,OAAO,CAACE,KAAK,CAAC,CAAC;UAAET,CAAC;UAAEC;QAAE,CAAC,KAAK;UAC1C,IAAID,CAAC,GAAG,CAAC,IAAIA,CAAC,IAAI,GAAG,IAAIC,CAAC,GAAG,CAAC,IAAIA,CAAC,IAAI,GAAG,EAAE,OAAO,KAAK;UACxD,MAAMS,KAAK,GAAGjB,GAAG,CAACkB,YAAY,CAACX,CAAC,EAAEC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAACW,IAAI;UAC/C,OAAOF,KAAK,CAAC,CAAC,CAAC,IAAI,EAAE;QACvB,CAAC,CAAC;QAEF,IAAI,CAAC6B,OAAO,EAAE;QAEd,MAAMhB,QAAQ,CAACG,KAAK,CAAC;UACnB1B,CAAC,EAAEqC,IAAI,GAAG,EAAE;UACZpC,CAAC,EAAEqC,IAAI,GAAG,EAAE;UACZV,UAAU,EAAE;YAAEC,QAAQ,EAAE;UAAK;QAC/B,CAAC,CAAC;QAEFK,MAAM,GAAGG,IAAI;QACbF,MAAM,GAAGG,IAAI;MACf;MAEA,MAAMf,QAAQ,CAACG,KAAK,CAAC;QACnB1B,CAAC,EAAEkC,MAAM,GAAG,EAAE;QACdjC,CAAC,EAAEkC,MAAM,GAAG,EAAE;QACdP,UAAU,EAAE;UAAEC,QAAQ,EAAE,GAAG;UAAEC,IAAI,EAAE;QAAU;MAC/C,CAAC,CAAC;MAEFT,mBAAmB,CAACa,MAAM,EAAEC,MAAM,CAAC;IACrC;EACF,CAAC,CAAC,CAAC;EAEH,oBACE3D,OAAA,CAACJ,MAAM,CAACW,GAAG;IACTG,GAAG,EAAEA,GAAI;IACTsD,GAAG,EAAC,MAAM;IACVC,SAAS,EAAC,sCAAsC;IAChDC,OAAO,EAAEnB,QAAS;IAClBoB,OAAO,EAAE;MAAE3C,CAAC,EAAEA,CAAC,GAAG,EAAE;MAAEC,CAAC,EAAEA,CAAC,GAAG,EAAE;MAAE0B,KAAK,EAAE;IAAE,CAAE;IAC5CiB,KAAK,EAAE;MAAEC,MAAM,EAAE;IAAE;EAAE;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACtB,CAAC;AAEN,CAAC;EAAA,QA3EkB5E,YAAY;AAAA,EA2E9B,CAAC;EAAA,QA3EiBA,YAAY;AAAA,EA2E7B;AAAC6E,GAAA,GA5EGjC,IAAI;AA8EV,eAAe,SAASkC,OAAOA,CAAC;EAAEC;AAAqB,CAAC,EAAE;EAAAC,GAAA;EACxD,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGrF,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACsF,UAAU,EAAEC,aAAa,CAAC,GAAGvF,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAACwF,IAAI,EAAEC,OAAO,CAAC,GAAGzF,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAAC0F,SAAS,EAAEC,YAAY,CAAC,GAAG3F,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM4F,QAAQ,GAAG3F,MAAM,CAAC,EAAE,CAAC;EAC3B,MAAM,CAAC4F,cAAc,EAAEC,iBAAiB,CAAC,GAAG9F,QAAQ,CAAC,KAAK,CAAC;EAC3D,MAAM,CAAC+F,aAAa,EAAEC,gBAAgB,CAAC,GAAGhG,QAAQ,CAAC,EAAE,CAAC;EAEtDD,SAAS,CAAC,MAAM;IACd,MAAMkG,KAAK,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,IAAI,IAAI,CAAC;IAClE,IAAIJ,KAAK,CAACK,MAAM,GAAG,CAAC,EAAE;MACpBjB,QAAQ,CAACY,KAAK,CAAC;MACfV,aAAa,CAAC,IAAI,CAAC;MACnBK,QAAQ,CAACW,OAAO,GAAGN,KAAK,CAACO,GAAG,CAAC,mBAAM1G,KAAK,CAAC2G,SAAS,CAAC,CAAC,CAAC;IACvD;EACF,CAAC,EAAE,EAAE,CAAC;EAEN1G,SAAS,CAAC,MAAM;IACd,IAAIuF,UAAU,EAAE;MACdc,YAAY,CAACM,OAAO,CAAC,UAAU,EAAER,IAAI,CAACS,SAAS,CAACvB,KAAK,CAAC,CAAC;IACzD;EACF,CAAC,EAAE,CAACA,KAAK,EAAEE,UAAU,CAAC,CAAC;EAEvB,MAAMsB,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC7B,MAAMC,SAAS,GAAG,EAAE;IACpB,KAAK,IAAI3C,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG9D,WAAW,CAACkG,MAAM,EAAEpC,CAAC,EAAE,EAAE;MAC3C,MAAMtB,GAAG,GAAG,MAAMjB,yBAAyB,CAACkF,SAAS,CAAC;MACtDA,SAAS,CAACC,IAAI,CAAC;QACbC,EAAE,EAAE,QAAQ7C,CAAC,EAAE;QACflD,GAAG,EAAEZ,WAAW,CAAC8D,CAAC,CAAC,CAAC8C,KAAK;QACzBlF,CAAC,EAAEc,GAAG,CAACd,CAAC;QACRC,CAAC,EAAEa,GAAG,CAACb,CAAC;QACRkF,UAAU,EAAE7G,WAAW,CAAC8D,CAAC,CAAC,CAACgD;MAC7B,CAAC,CAAC;IACJ;IACA7B,QAAQ,CAACwB,SAAS,CAAC;IACnBtB,aAAa,CAAC,IAAI,CAAC;IACnBE,OAAO,CAAC,EAAE,CAAC;IACXE,YAAY,CAAC,KAAK,CAAC;IACnBC,QAAQ,CAACW,OAAO,GAAGM,SAAS,CAACL,GAAG,CAAC,mBAAM1G,KAAK,CAAC2G,SAAS,CAAC,CAAC,CAAC;IACzDL,YAAY,CAACM,OAAO,CAAC,UAAU,EAAER,IAAI,CAACS,SAAS,CAACE,SAAS,CAAC,CAAC;EAC7D,CAAC;EAED,MAAMM,kBAAkB,GAAGA,CAACC,KAAK,EAAEtF,CAAC,EAAEC,CAAC,KAAK;IAC1CsD,QAAQ,CAAEgC,IAAI,IAAK;MACjB,MAAMC,OAAO,GAAG,CAAC,GAAGD,IAAI,CAAC;MACzBC,OAAO,CAACF,KAAK,CAAC,GAAG;QAAE,GAAGE,OAAO,CAACF,KAAK,CAAC;QAAEtF,CAAC;QAAEC;MAAE,CAAC;MAC5C,OAAOuF,OAAO;IAChB,CAAC,CAAC;EACJ,CAAC;EAED,MAAMC,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC7B,MAAM5G,OAAO,CAAC6G,GAAG,CACf5B,QAAQ,CAACW,OAAO,CAACC,GAAG,CAACpD,GAAG;MAAA,IAAAqE,YAAA,EAAAC,kBAAA;MAAA,QAAAD,YAAA,GAAIrE,GAAG,CAACmD,OAAO,cAAAkB,YAAA,wBAAAC,kBAAA,GAAXD,YAAA,CAAa3D,KAAK,cAAA4D,kBAAA,uBAAlBA,kBAAA,CAAAC,IAAA,CAAAF,YAAqB,CAAC;IAAA,EACpD,CAAC;EACH,CAAC;EAED,MAAMG,QAAQ,GAAG,MAAAA,CAAA,KAAY;IAAA,IAAAC,iBAAA;IAC3B,IAAI,CAACvC,UAAU,IAAIF,KAAK,CAACkB,MAAM,KAAK,CAAC,EAAE;IAEvC,MAAMwB,aAAa,GAAG5F,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAGgD,KAAK,CAACkB,MAAM,CAAC;IAC9D,MAAMyB,YAAY,GAAG3C,KAAK,CAAC0C,aAAa,CAAC;IAEzC,MAAMP,UAAU,CAAC,CAAC,CAAC,CAAC;;IAEpB;IACA,MAAMS,cAAc,IAAAH,iBAAA,GAAGzH,WAAW,CAAC6H,IAAI,CAACC,CAAC,IAAIA,CAAC,CAAClB,KAAK,KAAKe,YAAY,CAAC/G,GAAG,CAAC,cAAA6G,iBAAA,uBAAnDA,iBAAA,CAAqDX,IAAI;IAChF,IAAI,CAACc,cAAc,EAAE;;IAErB;IACApC,QAAQ,CAACW,OAAO,CAAC4B,MAAM,CAACL,aAAa,EAAE,CAAC,CAAC;IACzCzC,QAAQ,CAAEgC,IAAI,IAAK;MACjB,MAAMC,OAAO,GAAG,CAAC,GAAGD,IAAI,CAAC;MACzBC,OAAO,CAACa,MAAM,CAACL,aAAa,EAAE,CAAC,CAAC;MAChC1B,YAAY,CAACM,OAAO,CAAC,UAAU,EAAER,IAAI,CAACS,SAAS,CAACW,OAAO,CAAC,CAAC;MACzD,OAAOA,OAAO;IAChB,CAAC,CAAC;;IAEF;IACA,MAAMD,IAAI,GAAGnB,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,qBAAqB,CAAC,IAAI,IAAI,CAAC;IAC5E,MAAMiB,OAAO,GAAG,CAAC,GAAG,IAAIc,GAAG,CAAC,CAAC,GAAGf,IAAI,EAAEW,cAAc,CAAC,CAAC,CAAC;IACvD5B,YAAY,CAACM,OAAO,CAAC,qBAAqB,EAAER,IAAI,CAACS,SAAS,CAACW,OAAO,CAAC,CAAC;IAEpE7B,OAAO,CAACuC,cAAc,CAAC;IACvBrC,YAAY,CAAC,IAAI,CAAC;EAEpB,CAAC;EAED,MAAM0C,QAAQ,GAAGA,CAAA,KAAM;IACrBjC,YAAY,CAACkC,UAAU,CAAC,UAAU,CAAC;IACnClC,YAAY,CAACkC,UAAU,CAAC,qBAAqB,CAAC;IAC9CjD,QAAQ,CAAC,EAAE,CAAC;IACZE,aAAa,CAAC,KAAK,CAAC;IACpBE,OAAO,CAAC,IAAI,CAAC;IACbE,YAAY,CAAC,KAAK,CAAC;IACnB4C,qBAAqB,CAAC,IAAI,CAAC;IAC3BvC,gBAAgB,CAAC,EAAE,CAAC;IACpBF,iBAAiB,CAAC,KAAK,CAAC;IACxBF,QAAQ,CAACW,OAAO,GAAG,EAAE;EACvB,CAAC;EAED,MAAM,CAACiC,kBAAkB,EAAED,qBAAqB,CAAC,GAAGvI,QAAQ,CAAC,IAAI,CAAC;EAElE,MAAMyI,oBAAoB,GAAGA,CAAA,KAAM;IACjC,IAAI1C,aAAa,KAAK,cAAc,EAAE;MACpCsC,QAAQ,CAAC,CAAC;IACZ,CAAC,MAAM;MACLK,KAAK,CAAC,iCAAiC,CAAC;IAC1C;EACF,CAAC;EAED,oBACEpI,OAAA;IAAKiE,SAAS,EAAC,kCAAkC;IAAAoE,QAAA,gBAC/CrI,OAAA;MAAKiE,SAAS,EAAC,8BAA8B;MAAAoE,QAAA,gBAC3CrI,OAAA;QAAKU,GAAG,EAAC,eAAe;QAACsD,GAAG,EAAC,UAAU;QAACC,SAAS,EAAC;MAAmD;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,EACvGK,KAAK,CAACoB,GAAG,CAAC,CAACoC,IAAI,EAAE1E,CAAC,KACjB0E,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAE5H,GAAG;MAAA;MAAK;MACZV,OAAA,CAACyC,IAAI;QAEH/B,GAAG,EAAE4H,IAAI,CAAC5H,GAAI;QACdc,CAAC,EAAE8G,IAAI,CAAC9G,CAAE;QACVC,CAAC,EAAE6G,IAAI,CAAC7G,CAAE;QACVqB,GAAG,EAAEwC,QAAQ,CAACW,OAAO,CAACrC,CAAC,CAAE;QACzBf,mBAAmB,EAAEA,CAACrB,CAAC,EAAEC,CAAC,KAAKoF,kBAAkB,CAACjD,CAAC,EAAEpC,CAAC,EAAEC,CAAC;MAAE,GALtD6G,IAAI,CAAC7B,EAAE;QAAAnC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAMb,CAAC,GACA,IACN,CAAC,eACDzE,OAAA;QAAKU,GAAG,EAAC,cAAc;QAACsD,GAAG,EAAC,SAAS;QAACC,SAAS,EAAC;MAAoD;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACpG,CAAC,eAENzE,OAAA;MAAKiE,SAAS,EAAC,0CAA0C;MAAAoE,QAAA,EACtD,CAACrD,UAAU,gBACXhF,OAAA,CAACJ,MAAM,CAAC2I,MAAM;QACdtE,SAAS,EAAC,iMAI0C;QACpDuE,OAAO,EAAElC,UAAW;QAAA+B,QAAA,EACrB;MAED;QAAA/D,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAe,CAAC,gBAGbzE,OAAA,CAAAE,SAAA;QAAAmI,QAAA,gBACErI,OAAA,CAACJ,MAAM,CAAC2I,MAAM;UACdtE,SAAS,EAAC,wJAG+C;UACzDuE,OAAO,EAAEvB,UAAW;UAAAoB,QAAA,EACnB;QAED;UAAA/D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAe,CAAC,eAGhBzE,OAAA,CAACJ,MAAM,CAAC2I,MAAM;UACdtE,SAAS,EAAC,oJAE2D;UACrEuE,OAAO,EAAElB,QAAS;UAClBmB,QAAQ,EAAE3D,KAAK,CAACkB,MAAM,KAAK,CAAE;UAAAqC,QAAA,EAC5B;QAED;UAAA/D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAe,CAAC;MAAA,eAChB;IACH;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,eAENzE,OAAA;MAAKiE,SAAS,EAAC,wDAAwD;MAAAoE,QAAA,GACtEjD,SAAS,iBACNpF,OAAA;QACE0I,WAAW;QACXC,QAAQ;QACRC,KAAK;QACLC,uBAAuB;QACvB5E,SAAS,EAAC,0BAA0B;QACpC6E,OAAO,EAAEA,CAAA,KAAMzD,YAAY,CAAC,KAAK,CAAE;QAAAgD,QAAA,gBAEnCrI,OAAA;UAAQU,GAAG,EAAC,oBAAoB;UAACqI,IAAI,EAAC;QAAW;UAAAzE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,gDAEtD;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CACR,EACA,CAACW,SAAS,IAAIF,IAAI,iBACjBlF,OAAA;QAAKiE,SAAS,EAAC,8CAA8C;QAAAoE,QAAA,gBAC3DrI,OAAA;UAAGiE,SAAS,EAAC,sCAAsC;UAAAoE,QAAA,GAAC,SAAE,EAACnD,IAAI,EAAC,SAAE;QAAA;UAAAZ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,eAClEzE,OAAA;UACEwI,OAAO,EAAEA,CAAA,KAAM;YACb,MAAMQ,aAAa,GAAGlJ,WAAW,CAAC6H,IAAI,CAACC,CAAC,IAAIA,CAAC,CAAChB,IAAI,KAAK1B,IAAI,CAAC;YAE5D+C,qBAAqB,CAAC;cACpBrB,IAAI,EAAE,CAAAoC,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEpC,IAAI,KAAI1B,IAAI;cACjCwB,KAAK,EAAE,CAAAsC,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEtC,KAAK,KAAI,oBAAoB;cACnDuC,WAAW,EACT,CAAAD,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEC,WAAW,KAC1B,2EAA2E;cAC7EC,MAAM,EAAE;YACV,CAAC,CAAC;UACJ,CAAE;UACFjF,SAAS,EAAC,mHAAmH;UAAAoE,QAAA,EAC9H;QAED;UAAA/D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAEE,CAAC,EAELyD,kBAAkB,iBACjBlI,OAAA;MAAKiE,SAAS,EAAC,6FAA6F;MAAAoE,QAAA,eAC1GrI,OAAA;QAAKiE,SAAS,EAAC,wEAAwE;QAAAoE,QAAA,gBACrFrI,OAAA;UACEiE,SAAS,EAAC,0DAA0D;UACpEuE,OAAO,EAAEA,CAAA,KAAMP,qBAAqB,CAAC,IAAI,CAAE;UAAAI,QAAA,EAC5C;QAED;UAAA/D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACTzE,OAAA;UACEU,GAAG,EAAEwH,kBAAkB,CAACxB,KAAM;UAC9B1C,GAAG,EAAEkE,kBAAkB,CAACtB,IAAK;UAC7B3C,SAAS,EAAC;QAAwB;UAAAK,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACnC,CAAC,eACFzE,OAAA;UAAIiE,SAAS,EAAC,kCAAkC;UAAAoE,QAAA,EAAEH,kBAAkB,CAACtB;QAAI;UAAAtC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eAC/EzE,OAAA;UAAGiE,SAAS,EAAC,4BAA4B;UAAAoE,QAAA,EACxCH,kBAAkB,CAACe;QAAW;UAAA3E,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5B,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN,EAGAO,UAAU,iBACThF,OAAA;MACEiE,SAAS,EAAC,8GAA8G;MACxHuE,OAAO,EAAEA,CAAA,KAAMhD,iBAAiB,CAAC,IAAI,CAAE;MAAA6C,QAAA,EACxC;IAED;MAAA/D,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CACT,EAGAc,cAAc,iBACbvF,OAAA;MAAKiE,SAAS,EAAC,kFAAkF;MAAAoE,QAAA,eAC/FrI,OAAA;QAAKiE,SAAS,EAAC,oDAAoD;QAAAoE,QAAA,gBACjErI,OAAA;UAAIiE,SAAS,EAAC,4BAA4B;UAAAoE,QAAA,EAAC;QAAuB;UAAA/D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACvEzE,OAAA;UACE+I,IAAI,EAAC,UAAU;UACfI,KAAK,EAAE1D,aAAc;UACrB2D,QAAQ,EAAGC,CAAC,IAAK3D,gBAAgB,CAAC2D,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;UAClDlF,SAAS,EAAC,sDAAsD;UAChEsF,WAAW,EAAC;QAAU;UAAAjF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACvB,CAAC,eACFzE,OAAA;UAAKiE,SAAS,EAAC,2BAA2B;UAAAoE,QAAA,gBACxCrI,OAAA;YACEiE,SAAS,EAAC,4DAA4D;YACtEuE,OAAO,EAAEA,CAAA,KAAMhD,iBAAiB,CAAC,KAAK,CAAE;YAAA6C,QAAA,EACzC;UAED;YAAA/D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACTzE,OAAA;YACEiE,SAAS,EAAC,0DAA0D;YACpEuE,OAAO,EAAEL,oBAAqB;YAAAE,QAAA,EAC/B;UAED;YAAA/D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAEE,CAAC;AAEV;AAACI,GAAA,CAjRuBF,OAAO;AAAA6E,GAAA,GAAP7E,OAAO;AAAA,IAAA/B,EAAA,EAAA8B,GAAA,EAAA8E,GAAA;AAAAC,YAAA,CAAA7G,EAAA;AAAA6G,YAAA,CAAA/E,GAAA;AAAA+E,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}