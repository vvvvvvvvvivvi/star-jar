{"ast":null,"code":"// ComplimentDex.jsx\nimport React,{useEffect,useMemo,useState}from'react';import compliments from'./complimentData';// Use the same helper + keys as StarJar\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BUILD_VERSION='2025-08-11-1';// bump when you update images\nconst asset=p=>`${process.env.PUBLIC_URL}${p.startsWith('/')?p:`/${p}`}?v=${BUILD_VERSION}`;const APP_NS=(process.env.PUBLIC_URL||'')+':starjar';const KEYS={stars:`${APP_NS}:jarStars`,unlocked:`${APP_NS}:unlockedCompliments`,ver:`${APP_NS}:version`};export default function ComplimentDex(){const[unlocked,setUnlocked]=useState(new Set());const loadUnlocked=()=>{try{const arr=JSON.parse(localStorage.getItem(KEYS.unlocked)||'[]');setUnlocked(new Set(Array.isArray(arr)?arr:[]));}catch{setUnlocked(new Set());}};useEffect(()=>{const reload=()=>loadUnlocked();window.addEventListener('starjar:updated',reload);window.addEventListener('storage',reload);// cross-tab support\ndocument.addEventListener('visibilitychange',()=>{if(document.visibilityState==='visible')loadUnlocked();});return()=>{window.removeEventListener('starjar:updated',reload);window.removeEventListener('storage',reload);document.removeEventListener('visibilitychange',reload);};},[]);const items=useMemo(()=>{// decorate compliments with unlocked flag\nconst withFlags=compliments.map(c=>({...c,unlocked:unlocked.has(c.text)}));// unlocked first, then locked (stable within each group)\nreturn withFlags.sort((a,b)=>Number(b.unlocked)-Number(a.unlocked));},[unlocked]);return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-xl mx-auto px-4 pt-4 pb-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-[#6D679D]\",children:\"Dex\"}),/*#__PURE__*/_jsx(\"button\",{onClick:loadUnlocked,className:\"text-sm px-3 py-1 rounded-full border border-[#d6d2e8] bg-white hover:bg-[#f3f0fa] transition\",children:\"Refresh\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-3 sm:grid-cols-4 gap-4\",children:items.map(c=>/*#__PURE__*/_jsxs(\"div\",{className:`relative rounded-xl p-3 border shadow-sm ${c.unlocked?'bg-white':'bg-gray-50'}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-14 h-14 mx-auto relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:asset(c.image),alt:c.text,className:`w-full h-full object-contain ${c.unlocked?'':'opacity-40'}`,onError:e=>{e.currentTarget.onerror=null;e.currentTarget.src=asset('/stars/default.PNG');// ensure file exists\n}}),!c.unlocked&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs bg-white/80 rounded px-2 py-0.5 border\",children:\"Locked\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-medium text-[#6D679D]\",children:c.text}),c.unlocked?/*#__PURE__*/_jsx(\"div\",{className:\"text-[11px] text-gray-500 line-clamp-2 mt-1\",children:c.description}):/*#__PURE__*/_jsx(\"div\",{className:\"text-[11px] text-gray-400 mt-1\",children:\"Collect this star to reveal\"})]})]},c.text))}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center text-xs text-gray-500 mt-4\",children:[unlocked.size,\"/\",compliments.length,\" collected\"]})]});}const displayName=c.unlocked?c.text:'XXX';/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-medium text-[#6D679D]\",children:displayName}),c.unlocked?/*#__PURE__*/_jsx(\"div\",{className:\"text-[11px] text-gray-500 line-clamp-2 mt-1\",children:c.description}):/*#__PURE__*/_jsx(\"div\",{className:\"text-[11px] text-gray-400 mt-1\",children:\"Collect this star to reveal\"})]});","map":{"version":3,"names":["React","useEffect","useMemo","useState","compliments","jsx","_jsx","jsxs","_jsxs","BUILD_VERSION","asset","p","process","env","PUBLIC_URL","startsWith","APP_NS","KEYS","stars","unlocked","ver","ComplimentDex","setUnlocked","Set","loadUnlocked","arr","JSON","parse","localStorage","getItem","Array","isArray","reload","window","addEventListener","document","visibilityState","removeEventListener","items","withFlags","map","c","has","text","sort","a","b","Number","className","children","onClick","src","image","alt","onError","e","currentTarget","onerror","description","size","length","displayName"],"sources":["/Users/kakalee/Desktop/May projects/lucky-star-jar/src/ComplimentDex.js"],"sourcesContent":["// ComplimentDex.jsx\nimport React, { useEffect, useMemo, useState } from 'react';\nimport compliments from './complimentData';\n\n// Use the same helper + keys as StarJar\nconst BUILD_VERSION = '2025-08-11-1'; // bump when you update images\nconst asset = (p) =>\n  `${process.env.PUBLIC_URL}${p.startsWith('/') ? p : `/${p}`}?v=${BUILD_VERSION}`;\n\nconst APP_NS = (process.env.PUBLIC_URL || '') + ':starjar';\nconst KEYS = {\n  stars: `${APP_NS}:jarStars`,\n  unlocked: `${APP_NS}:unlockedCompliments`,\n  ver: `${APP_NS}:version`,\n};\n\nexport default function ComplimentDex() {\n  const [unlocked, setUnlocked] = useState(new Set());\n\n  const loadUnlocked = () => {\n    try {\n      const arr = JSON.parse(localStorage.getItem(KEYS.unlocked) || '[]');\n      setUnlocked(new Set(Array.isArray(arr) ? arr : []));\n    } catch {\n      setUnlocked(new Set());\n    }\n  };\n\n  useEffect(() => {\n    const reload = () => loadUnlocked();\n    window.addEventListener('starjar:updated', reload);\n    window.addEventListener('storage', reload);          // cross-tab support\n    document.addEventListener('visibilitychange', () => {\n      if (document.visibilityState === 'visible') loadUnlocked();\n    });\n    return () => {\n      window.removeEventListener('starjar:updated', reload);\n      window.removeEventListener('storage', reload);\n      document.removeEventListener('visibilitychange', reload);\n    };\n  }, []);\n  \n\n  const items = useMemo(() => {\n    // decorate compliments with unlocked flag\n    const withFlags = compliments.map((c) => ({\n      ...c,\n      unlocked: unlocked.has(c.text),\n    }));\n    // unlocked first, then locked (stable within each group)\n    return withFlags.sort((a, b) => Number(b.unlocked) - Number(a.unlocked));\n  }, [unlocked]);\n\n  return (\n    <div className=\"max-w-xl mx-auto px-4 pt-4 pb-12\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <h2 className=\"text-xl font-semibold text-[#6D679D]\">Dex</h2>\n        <button\n          onClick={loadUnlocked}\n          className=\"text-sm px-3 py-1 rounded-full border border-[#d6d2e8] bg-white hover:bg-[#f3f0fa] transition\"\n        >\n          Refresh\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-3 sm:grid-cols-4 gap-4\">\n        {items.map((c) => (\n          <div\n            key={c.text}\n            className={`relative rounded-xl p-3 border shadow-sm ${\n              c.unlocked ? 'bg-white' : 'bg-gray-50'\n            }`}\n          >\n            <div className=\"w-14 h-14 mx-auto relative\">\n              <img\n                src={asset(c.image)}\n                alt={c.text}\n                className={`w-full h-full object-contain ${c.unlocked ? '' : 'opacity-40'}`}\n                onError={(e) => {\n                  e.currentTarget.onerror = null;\n                  e.currentTarget.src = asset('/stars/default.PNG'); // ensure file exists\n                }}\n              />\n              {!c.unlocked && (\n                <div className=\"absolute inset-0 flex items-center justify-center\">\n                  <span className=\"text-xs bg-white/80 rounded px-2 py-0.5 border\">Locked</span>\n                </div>\n              )}\n            </div>\n            <div className=\"mt-2 text-center\">\n              <div className=\"text-xs font-medium text-[#6D679D]\">{c.text}</div>\n              {c.unlocked ? (\n                <div className=\"text-[11px] text-gray-500 line-clamp-2 mt-1\">{c.description}</div>\n              ) : (\n                <div className=\"text-[11px] text-gray-400 mt-1\">Collect this star to reveal</div>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n\n      <p className=\"text-center text-xs text-gray-500 mt-4\">\n        {unlocked.size}/{compliments.length} collected\n      </p>\n    </div>\n  );\n}\n\nconst displayName = c.unlocked ? c.text : 'XXX';\n\n<div className=\"mt-2 text-center\">\n  <div className=\"text-xs font-medium text-[#6D679D]\">\n    {displayName}\n  </div>\n  {c.unlocked ? (\n    <div className=\"text-[11px] text-gray-500 line-clamp-2 mt-1\">\n      {c.description}\n    </div>\n  ) : (\n    <div className=\"text-[11px] text-gray-400 mt-1\">Collect this star to reveal</div>\n  )}\n</div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}