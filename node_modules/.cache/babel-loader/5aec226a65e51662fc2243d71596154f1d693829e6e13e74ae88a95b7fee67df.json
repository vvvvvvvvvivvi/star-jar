{"ast":null,"code":"// src/StarJar.js\nimport React,{useEffect,useState,useRef}from'react';import{motion,useAnimation}from'framer-motion';import compliments from'./complimentData';// ---------- asset + storage keys ----------\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const BUILD_VERSION='2025-08-11-1';// bump when you update public assets\nconst asset=p=>`${process.env.PUBLIC_URL}${p.startsWith('/')?p:`/${p}`}?v=${BUILD_VERSION}`;const APP_NS=(process.env.PUBLIC_URL||'')+':starjar';const KEYS={stars:`${APP_NS}:jarStars`,unlocked:`${APP_NS}:unlockedCompliments`,ver:`${APP_NS}:version`};const STORAGE_VERSION='1';// Forewords (onboarding) storage flag\nconst INTRO_KEY=`${APP_NS}:introDismissed`;// ---------- mask for in-jar collisions ----------\nconst maskImageSrc=asset('/jar/spawn-mask.PNG');const createMaskContext=()=>{return new Promise(resolve=>{const img=new Image();img.src=maskImageSrc;img.onload=()=>{const canvas=document.createElement('canvas');canvas.width=300;canvas.height=300;const ctx=canvas.getContext('2d');if(ctx)ctx.drawImage(img,0,0,300,300);resolve(ctx);};img.onerror=()=>{console.warn('spawn-mask.PNG failed to load:',maskImageSrc);resolve(null);};});};const getNonOverlappingPosition=async function(existing){let radius=arguments.length>1&&arguments[1]!==undefined?arguments[1]:32;const ctx=await createMaskContext();if(!ctx)return{x:150,y:180};const halfSize=radius/2;let attempts=0;while(attempts<1000){const x=Math.floor(Math.random()*300);const y=Math.floor(Math.random()*300);const corners=[{x:x-halfSize,y:y-halfSize},{x:x+halfSize,y:y-halfSize},{x:x-halfSize,y:y+halfSize},{x:x+halfSize,y:y+halfSize}];const allValid=corners.every(_ref=>{let{x,y}=_ref;if(x<0||x>=300||y<0||y>=300)return false;const pixel=ctx.getImageData(x,y,1,1).data;return pixel[3]>=50;});const notTooClose=existing.every(pos=>{const dx=pos.x-x;const dy=pos.y-y;return dx*dx+dy*dy>radius*radius;});if(allValid&&notTooClose)return{x,y};attempts++;}return{x:150,y:180};};// ---------- Slide Card (Forewords) ----------\nfunction IntroSlideCard(_ref2){let{open,slides,index,setIndex,onClose,onNeverShow}=_ref2;const canBack=index>0;const canNext=index<slides.length-1;if(!open)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-[60] flex items-end sm:items-center justify-center bg-black/40 backdrop-blur-sm\",children:/*#__PURE__*/_jsxs(motion.div,{initial:{y:40,opacity:0},animate:{y:0,opacity:1},exit:{y:40,opacity:0},className:\"w-full sm:w-[440px] mx-4 sm:mx-0 rounded-2xl shadow-xl border border-[#E9E3F9] bg-white\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-5 pt-4 pb-3 rounded-t-2xl flex items-start justify-between border-b border-[#E9E3F9]\",style:{backgroundColor:'#F8F7FC'},children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",style:{color:'#6D679D'},children:slides[index].title}),/*#__PURE__*/_jsx(\"button\",{className:\"text-gray-400 hover:text-gray-600\",onClick:onClose,\"aria-label\":\"Close\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-5 py-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:slides[index].body}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 flex justify-center gap-2\",children:slides.map((_,i)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIndex(i),className:\"w-2.5 h-2.5 rounded-full transition\",style:{backgroundColor:i===index?'#6D679D':'#D6D2E8',opacity:i===index?1:0.9},\"aria-label\":`Go to slide ${i+1}`},i))}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-5 mb-4 flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onNeverShow,className:\"text-xs underline\",style:{color:'#6D679D'},children:\"Don\\u2019t show again\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>canBack&&setIndex(index-1),disabled:!canBack,className:`px-3 py-1.5 rounded-full border text-sm transition ${canBack?'hover:bg-white/60':'cursor-not-allowed opacity-60'}`,style:{borderColor:'#D6D2E8',color:'#6D679D',background:'white'},children:\"Back\"}),canNext?/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIndex(index+1),className:\"px-4 py-1.5 rounded-full text-sm text-white transition\",style:{background:'#6D679D'},children:\"Okay?\"}):/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"px-4 py-1.5 rounded-full text-sm text-white transition\",style:{background:'#6D679D'},children:\"Stars!\"})]})]})]})]})});}// ---------- Star image ----------\nconst Star=/*#__PURE__*/React.forwardRef((_ref3,ref)=>{let{src,x,y,updateFinalPosition}=_ref3;const controls=useAnimation();const[mounted,setMounted]=useState(false);// prevent jump: set transform once, don't re-init on re-render\nuseEffect(()=>{controls.set({x:x-16,y:y-16,scale:1});setMounted(true);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);React.useImperativeHandle(ref,()=>({async shake(){if(!mounted)return;const ctx=await createMaskContext();if(!ctx)return;const starSize=32;const halfSize=starSize/2;let finalX=x;let finalY=y;for(let i=0;i<8;i++){let newX=finalX+(Math.random()-0.5)*20;let newY=finalY+(Math.random()-0.5)*20;const corners=[{x:newX-halfSize,y:newY-halfSize},{x:newX+halfSize,y:newY-halfSize},{x:newX-halfSize,y:newY+halfSize},{x:newX+halfSize,y:newY+halfSize}];const isValid=corners.every(_ref4=>{let{x,y}=_ref4;if(x<0||x>=300||y<0||y>=300)return false;const pixel=ctx.getImageData(x,y,1,1).data;return pixel[3]>=50;});if(!isValid)continue;await controls.start({x:newX-16,y:newY-16,transition:{duration:0.08}});finalX=newX;finalY=newY;}await controls.start({x:finalX-16,y:finalY-16,transition:{duration:0.4,ease:'easeOut'}});updateFinalPosition(finalX,finalY);}}));return/*#__PURE__*/_jsx(motion.img,{src:asset(src),alt:\"star\",onError:e=>{e.currentTarget.onerror=null;e.currentTarget.src=asset('/stars/default.PNG');},className:\"absolute w-8 h-8 pointer-events-none\",animate:controls,initial:false,layout:false,style:{zIndex:5}});});// ---------- Main component ----------\nexport default function StarJar(_ref5){let{onComplimentUnlocked}=_ref5;const[stars,setStars]=useState([]);// [{id, src (relative), x, y, compliment}]\nconst[hasSpawned,setHasSpawned]=useState(false);const[wish,setWish]=useState('');const[showVideo,setShowVideo]=useState(false);const[selectedCompliment,setSelectedCompliment]=useState(null);// Intro deck state\nconst[showIntro,setShowIntro]=useState(false);const[introIndex,setIntroIndex]=useState(0);const forewords=[{title:'Surprise:>',body:\"\",hint:\"Press 'Next' to continue!\"},{title:\"I've been hiding a secret from you...\",body:\"You've been asking me what I've been working on and I didn't want to tell you, but today is finally the day I reveal my deep dark secret to you...\"},{title:'So',body:'you know I am bad with verbal expressions, and from you showering me with kind words, I know you like them too.'},{title:'Star Jar Project',body:'I stored everything I like about you in stars. And you are free to unravel them and make me die of embarrassment. You can make a wish to reveal a star whenever you like, and you can open and close the app without losing the stars you have gathered.'},{title:'Happy birthday!',body:'I hope you like this present and I hope you healthy, happy and big boi.'}];const starRefs=useRef([]);// ---- load once on mount ----\nuseEffect(()=>{try{const v=localStorage.getItem(KEYS.ver);if(v!==STORAGE_VERSION){localStorage.setItem(KEYS.ver,STORAGE_VERSION);}const saved=JSON.parse(localStorage.getItem(KEYS.stars)||'[]');if(Array.isArray(saved)&&saved.length>0){setStars(saved);// saved uses RELATIVE image paths\nsetHasSpawned(true);starRefs.current=saved.map(()=>/*#__PURE__*/React.createRef());}else{setHasSpawned(false);}}catch(e){console.warn('Failed to load saved jar:',e);}},[]);// ---- show intro if not dismissed and not spawned ----\nuseEffect(()=>{const dismissed=localStorage.getItem(INTRO_KEY)==='1';if(!dismissed&&!hasSpawned){setIntroIndex(0);setShowIntro(true);}},[hasSpawned]);// ---- persist when stars change (after spawn) ----\nuseEffect(()=>{if(!hasSpawned)return;try{localStorage.setItem(KEYS.stars,JSON.stringify(stars));}catch(e){console.warn('Failed to save jar:',e);}},[stars,hasSpawned]);// ---- keep refs array aligned with stars array ----\nuseEffect(()=>{if(starRefs.current.length!==stars.length){starRefs.current=stars.map((_,i)=>starRefs.current[i]||/*#__PURE__*/React.createRef());}},[stars]);const spawnStars=async()=>{const generated=[];for(let i=0;i<compliments.length;i++){const pos=await getNonOverlappingPosition(generated);generated.push({id:`star-${i}`,src:compliments[i].image,// save RELATIVE path\nx:pos.x,y:pos.y,compliment:compliments[i].text});}setStars(generated);setHasSpawned(true);setWish('');setShowVideo(false);starRefs.current=generated.map(()=>/*#__PURE__*/React.createRef());localStorage.setItem(KEYS.stars,JSON.stringify(generated));window.dispatchEvent(new Event('starjar:updated'));};// update by ID (not index)\nconst updateStarPosition=(id,x,y)=>{setStars(prev=>prev.map(s=>s.id===id?{...s,x,y}:s));};const shakeStars=async()=>{if(starRefs.current.length!==stars.length){starRefs.current=stars.map((_,i)=>starRefs.current[i]||/*#__PURE__*/React.createRef());}await Promise.all(starRefs.current.map(ref=>{var _ref$current,_ref$current$shake;return(_ref$current=ref.current)===null||_ref$current===void 0?void 0:(_ref$current$shake=_ref$current.shake)===null||_ref$current$shake===void 0?void 0:_ref$current$shake.call(_ref$current);}));};const makeWish=async()=>{var _compliments$find,_starRefs$current;if(!hasSpawned||stars.length===0)return;await shakeStars();// do motion first\n// pick a star\nconst idx=Math.floor(Math.random()*stars.length);const picked=stars[idx];// filename helper: strip cache/query/hash\nconst filename=function(){let url=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';return url.split('/').pop().split('?')[0].split('#')[0];};const pickedFile=filename(picked.src);// e.g. \"pink1.PNG\"\nconst complimentText=(_compliments$find=compliments.find(c=>filename(c.image)===pickedFile))===null||_compliments$find===void 0?void 0:_compliments$find.text;if(!complimentText)return;// compute next state BEFORE writing\nconst nextStars=stars.filter((_,i)=>i!==idx);// keep refs aligned (remove the same index)\nif((_starRefs$current=starRefs.current)!==null&&_starRefs$current!==void 0&&_starRefs$current.length){starRefs.current.splice(idx,1);}// update storage FIRST so listeners see the latest\nlocalStorage.setItem(KEYS.stars,JSON.stringify(nextStars));const prevUnlocked=JSON.parse(localStorage.getItem(KEYS.unlocked)||'[]');const nextUnlocked=[...new Set([...prevUnlocked,complimentText])];localStorage.setItem(KEYS.unlocked,JSON.stringify(nextUnlocked));// notify Dex (and any others) to reload\nwindow.dispatchEvent(new Event('starjar:updated'));// now update UI state\nsetStars(nextStars);setWish(complimentText);setShowVideo(true);if(typeof onComplimentUnlocked==='function'){onComplimentUnlocked(complimentText);}};const resetJar=()=>{localStorage.removeItem(KEYS.stars);localStorage.removeItem(KEYS.unlocked);// show intro again on reset\nlocalStorage.removeItem(INTRO_KEY);setIntroIndex(0);setShowIntro(true);setStars([]);setHasSpawned(false);setWish(null);setShowVideo(false);setSelectedCompliment(null);setPasswordInput('');setShowResetModal(false);starRefs.current=[];window.dispatchEvent(new Event('starjar:updated'));};const[showResetModal,setShowResetModal]=useState(false);const[passwordInput,setPasswordInput]=useState('');const handlePasswordSubmit=()=>{if(passwordInput==='kakalove0608'){resetJar();}else{alert('Why you trying to break the law');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center mt-10\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-[300px] h-[300px]\",children:[/*#__PURE__*/_jsx(\"img\",{src:asset('/jar/back.PNG'),alt:\"jar back\",className:\"absolute inset-0 w-full h-full object-contain z-0\"}),stars.map((star,i)=>star!==null&&star!==void 0&&star.src?/*#__PURE__*/_jsx(Star,{src:star.src// relative here; Star wraps with asset()\n,x:star.x,y:star.y,ref:starRefs.current[i],updateFinalPosition:(x,y)=>updateStarPosition(star.id,x,y)},star.id):null),/*#__PURE__*/_jsx(\"img\",{src:asset('/jar/lid.PNG'),alt:\"jar lid\",className:\"absolute inset-0 w-full h-full object-contain z-10\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-4 mt-6 flex-wrap justify-center\",children:!hasSpawned?/*#__PURE__*/_jsx(motion.button,{className:\"bg-[#D8D1EF] hover:bg-[#CFC6EA] text-[#5C5575] text-lg px-6 py-3 rounded-full shadow-md font-semibold transition hover:scale-105 duration-200 ease-out backdrop-blur-sm border border-[#E9E3F9]\",onClick:spawnStars,children:\"Press me!\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(motion.button,{className:\"bg-white/30 backdrop-blur-md border border-[#D1D9EC] text-sm text-[#555] px-4 py-2 rounded-full shadow-sm hover:bg-white/50 hover:scale-105 transition\",onClick:shakeStars,children:\"Shake me\"}),/*#__PURE__*/_jsx(motion.button,{className:\"bg-[#bdaddb] hover:bg-[#b2d0f7] text-white text-lg px-6 py-3 rounded-full font-semibold shadow-md transition hover:scale-105 disabled:opacity-50\",onClick:makeWish,disabled:stars.length===0,children:\"Make a wish!\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-7 text-center h-24 flex items-center justify-center\",children:[showVideo&&/*#__PURE__*/_jsxs(\"video\",{playsInline:true,autoPlay:true,muted:true,disablePictureInPicture:true,className:\"w-49 h-36 object-contain\",onEnded:()=>setShowVideo(false),children:[/*#__PURE__*/_jsx(\"source\",{src:asset('/stars/unravel.mp4'),type:\"video/mp4\"}),\"Your browser does not support the video tag.\"]}),!showVideo&&wish&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center flex flex-col items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-[#6D679D] text-xl font-semibold\",children:[\"\\u2728 \",wish,\" \\u2728\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const c=compliments.find(cc=>cc.text===wish);const image=(c===null||c===void 0?void 0:c.image)||'/stars/default.PNG';setSelectedCompliment({text:(c===null||c===void 0?void 0:c.text)||wish,image:asset(image),description:(c===null||c===void 0?void 0:c.description)||'This star reflects one of your amazing qualities. Keep collecting more!',locked:false});},className:\"mt-1 px-3 py-1 rounded-full text-sm bg-white text-[#6D679D] border border-[#d6d2e8] hover:bg-[#f3f0fa] transition\",children:\"Read more\"})]})]}),selectedCompliment&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30 backdrop-blur-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg p-6 max-w-sm w-full relative text-center\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"absolute top-2 right-2 text-gray-400 hover:text-gray-600\",onClick:()=>setSelectedCompliment(null),children:\"\\u2715\"}),/*#__PURE__*/_jsx(\"img\",{src:selectedCompliment.image,alt:selectedCompliment.text,className:\"w-16 h-16 mx-auto mb-4\",onError:e=>{e.currentTarget.onerror=null;e.currentTarget.src=asset('/stars/default.PNG');}}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-[#6D679D]\",children:selectedCompliment.text}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:selectedCompliment.description})]})}),hasSpawned&&/*#__PURE__*/_jsx(\"button\",{className:\"fixed bottom-4 right-4 bg-[#D3DCE6] hover:bg-[#C6D0DB] text-sm text-black px-4 py-2 rounded-full shadow z-50\",onClick:()=>setShowResetModal(true),children:\"Reset Jar\"}),!showIntro&&/*#__PURE__*/_jsx(\"button\",{className:\"fixed bottom-4 left-4 bg-white/80 backdrop-blur-md border text-xs px-2 py-1 rounded-full shadow\",style:{borderColor:'#E9E3F9',color:'#6D679D'},onClick:()=>setShowIntro(true),title:\"About this app\",children:\"?\"}),showResetModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-lg w-80 text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Enter password to reset\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:passwordInput,onChange:e=>setPasswordInput(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded mb-4\",placeholder:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center gap-4\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-gray-300 hover:bg-gray-400 text-black px-4 py-2 rounded\",onClick:()=>setShowResetModal(false),children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded\",onClick:handlePasswordSubmit,children:\"Confirm\"})]})]})}),/*#__PURE__*/_jsx(IntroSlideCard,{open:showIntro,slides:forewords,index:introIndex,setIndex:setIntroIndex,onClose:()=>{setShowIntro(false);localStorage.setItem(INTRO_KEY,'1');// one-time dismiss on close\n},onNeverShow:()=>{localStorage.setItem(INTRO_KEY,'1');setShowIntro(false);}})]});}","map":{"version":3,"names":["React","useEffect","useState","useRef","motion","useAnimation","compliments","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BUILD_VERSION","asset","p","process","env","PUBLIC_URL","startsWith","APP_NS","KEYS","stars","unlocked","ver","STORAGE_VERSION","INTRO_KEY","maskImageSrc","createMaskContext","Promise","resolve","img","Image","src","onload","canvas","document","createElement","width","height","ctx","getContext","drawImage","onerror","console","warn","getNonOverlappingPosition","existing","radius","arguments","length","undefined","x","y","halfSize","attempts","Math","floor","random","corners","allValid","every","_ref","pixel","getImageData","data","notTooClose","pos","dx","dy","IntroSlideCard","_ref2","open","slides","index","setIndex","onClose","onNeverShow","canBack","canNext","className","children","div","initial","opacity","animate","exit","style","backgroundColor","color","title","onClick","body","map","_","i","disabled","borderColor","background","Star","forwardRef","_ref3","ref","updateFinalPosition","controls","mounted","setMounted","set","scale","useImperativeHandle","shake","starSize","finalX","finalY","newX","newY","isValid","_ref4","start","transition","duration","ease","alt","onError","e","currentTarget","layout","zIndex","StarJar","_ref5","onComplimentUnlocked","setStars","hasSpawned","setHasSpawned","wish","setWish","showVideo","setShowVideo","selectedCompliment","setSelectedCompliment","showIntro","setShowIntro","introIndex","setIntroIndex","forewords","hint","starRefs","v","localStorage","getItem","setItem","saved","JSON","parse","Array","isArray","current","createRef","dismissed","stringify","spawnStars","generated","push","id","image","compliment","text","window","dispatchEvent","Event","updateStarPosition","prev","s","shakeStars","all","_ref$current","_ref$current$shake","call","makeWish","_compliments$find","_starRefs$current","idx","picked","filename","url","split","pop","pickedFile","complimentText","find","c","nextStars","filter","splice","prevUnlocked","nextUnlocked","Set","resetJar","removeItem","setPasswordInput","setShowResetModal","showResetModal","passwordInput","handlePasswordSubmit","alert","star","button","playsInline","autoPlay","muted","disablePictureInPicture","onEnded","type","cc","description","locked","value","onChange","target","placeholder"],"sources":["/Users/kakalee/Desktop/May projects/lucky-star-jar/src/StarJar.js"],"sourcesContent":["// src/StarJar.js\nimport React, { useEffect, useState, useRef } from 'react';\nimport { motion, useAnimation } from 'framer-motion';\nimport compliments from './complimentData';\n\n// ---------- asset + storage keys ----------\nconst BUILD_VERSION = '2025-08-11-1'; // bump when you update public assets\nconst asset = (p) =>\n  `${process.env.PUBLIC_URL}${p.startsWith('/') ? p : `/${p}`}?v=${BUILD_VERSION}`;\n\nconst APP_NS = (process.env.PUBLIC_URL || '') + ':starjar';\nconst KEYS = {\n  stars: `${APP_NS}:jarStars`,\n  unlocked: `${APP_NS}:unlockedCompliments`,\n  ver: `${APP_NS}:version`,\n};\nconst STORAGE_VERSION = '1';\n\n// Forewords (onboarding) storage flag\nconst INTRO_KEY = `${APP_NS}:introDismissed`;\n\n// ---------- mask for in-jar collisions ----------\nconst maskImageSrc = asset('/jar/spawn-mask.PNG');\n\nconst createMaskContext = () => {\n  return new Promise((resolve) => {\n    const img = new Image();\n    img.src = maskImageSrc;\n\n    img.onload = () => {\n      const canvas = document.createElement('canvas');\n      canvas.width = 300;\n      canvas.height = 300;\n      const ctx = canvas.getContext('2d');\n      if (ctx) ctx.drawImage(img, 0, 0, 300, 300);\n      resolve(ctx);\n    };\n\n    img.onerror = () => {\n      console.warn('spawn-mask.PNG failed to load:', maskImageSrc);\n      resolve(null);\n    };\n  });\n};\n\nconst getNonOverlappingPosition = async (existing, radius = 32) => {\n  const ctx = await createMaskContext();\n  if (!ctx) return { x: 150, y: 180 };\n\n  const halfSize = radius / 2;\n  let attempts = 0;\n\n  while (attempts < 1000) {\n    const x = Math.floor(Math.random() * 300);\n    const y = Math.floor(Math.random() * 300);\n\n    const corners = [\n      { x: x - halfSize, y: y - halfSize },\n      { x: x + halfSize, y: y - halfSize },\n      { x: x - halfSize, y: y + halfSize },\n      { x: x + halfSize, y: y + halfSize },\n    ];\n\n    const allValid = corners.every(({ x, y }) => {\n      if (x < 0 || x >= 300 || y < 0 || y >= 300) return false;\n      const pixel = ctx.getImageData(x, y, 1, 1).data;\n      return pixel[3] >= 50;\n    });\n\n    const notTooClose = existing.every((pos) => {\n      const dx = pos.x - x;\n      const dy = pos.y - y;\n      return dx * dx + dy * dy > radius * radius;\n    });\n\n    if (allValid && notTooClose) return { x, y };\n    attempts++;\n  }\n\n  return { x: 150, y: 180 };\n};\n\n// ---------- Slide Card (Forewords) ----------\nfunction IntroSlideCard({ open, slides, index, setIndex, onClose, onNeverShow }) {\n  const canBack = index > 0;\n  const canNext = index < slides.length - 1;\n\n  if (!open) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-[60] flex items-end sm:items-center justify-center bg-black/40 backdrop-blur-sm\">\n      <motion.div\n        initial={{ y: 40, opacity: 0 }}\n        animate={{ y: 0, opacity: 1 }}\n        exit={{ y: 40, opacity: 0 }}\n        className=\"w-full sm:w-[440px] mx-4 sm:mx-0 rounded-2xl shadow-xl border border-[#E9E3F9] bg-white\"\n      >\n        {/* Header */}\n        <div\n          className=\"px-5 pt-4 pb-3 rounded-t-2xl flex items-start justify-between border-b border-[#E9E3F9]\"\n          style={{\n            backgroundColor: '#F8F7FC',\n          }}\n        >\n          <h3 className=\"text-lg font-semibold\" style={{ color: '#6D679D' }}>\n            {slides[index].title}\n          </h3>\n          <button\n            className=\"text-gray-400 hover:text-gray-600\"\n            onClick={onClose}\n            aria-label=\"Close\"\n          >\n            ✕\n          </button>\n        </div>\n\n        {/* Body */}\n        <div className=\"px-5 py-4\">\n          <p className=\"text-sm text-gray-600\">{slides[index].body}</p>\n\n          {/* Pager dots */}\n          <div className=\"mt-4 flex justify-center gap-2\">\n            {slides.map((_, i) => (\n              <button\n                key={i}\n                onClick={() => setIndex(i)}\n                className=\"w-2.5 h-2.5 rounded-full transition\"\n                style={{\n                  backgroundColor: i === index ? '#6D679D' : '#D6D2E8',\n                  opacity: i === index ? 1 : 0.9,\n                }}\n                aria-label={`Go to slide ${i + 1}`}\n              />\n            ))}\n          </div>\n\n          {/* Footer buttons */}\n          <div className=\"mt-5 mb-4 flex items-center justify-between\">\n            <button\n              onClick={onNeverShow}\n              className=\"text-xs underline\"\n              style={{ color: '#6D679D' }}\n            >\n              Don’t show again\n            </button>\n\n            <div className=\"flex gap-2\">\n              <button\n                onClick={() => canBack && setIndex(index - 1)}\n                disabled={!canBack}\n                className={`px-3 py-1.5 rounded-full border text-sm transition ${\n                  canBack ? 'hover:bg-white/60' : 'cursor-not-allowed opacity-60'\n                }`}\n                style={{ borderColor: '#D6D2E8', color: '#6D679D', background: 'white' }}\n              >\n                Back\n              </button>\n\n              {canNext ? (\n                <button\n                  onClick={() => setIndex(index + 1)}\n                  className=\"px-4 py-1.5 rounded-full text-sm text-white transition\"\n                  style={{ background: '#6D679D' }}\n                >\n                  Okay?\n                </button>\n              ) : (\n                <button\n                  onClick={onClose}\n                  className=\"px-4 py-1.5 rounded-full text-sm text-white transition\"\n                  style={{ background: '#6D679D' }}\n                >\n                  Stars!\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n      </motion.div>\n    </div>\n  );\n}\n\n// ---------- Star image ----------\nconst Star = React.forwardRef(({ src, x, y, updateFinalPosition }, ref) => {\n  const controls = useAnimation();\n  const [mounted, setMounted] = useState(false);\n\n  // prevent jump: set transform once, don't re-init on re-render\n  useEffect(() => {\n    controls.set({ x: x - 16, y: y - 16, scale: 1 });\n    setMounted(true);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  React.useImperativeHandle(ref, () => ({\n    async shake() {\n      if (!mounted) return;\n\n      const ctx = await createMaskContext();\n      if (!ctx) return;\n\n      const starSize = 32;\n      const halfSize = starSize / 2;\n\n      let finalX = x;\n      let finalY = y;\n\n      for (let i = 0; i < 8; i++) {\n        let newX = finalX + (Math.random() - 0.5) * 20;\n        let newY = finalY + (Math.random() - 0.5) * 20;\n\n        const corners = [\n          { x: newX - halfSize, y: newY - halfSize },\n          { x: newX + halfSize, y: newY - halfSize },\n          { x: newX - halfSize, y: newY + halfSize },\n          { x: newX + halfSize, y: newY + halfSize },\n        ];\n\n        const isValid = corners.every(({ x, y }) => {\n          if (x < 0 || x >= 300 || y < 0 || y >= 300) return false;\n          const pixel = ctx.getImageData(x, y, 1, 1).data;\n          return pixel[3] >= 50;\n        });\n\n        if (!isValid) continue;\n\n        await controls.start({\n          x: newX - 16,\n          y: newY - 16,\n          transition: { duration: 0.08 },\n        });\n\n        finalX = newX;\n        finalY = newY;\n      }\n\n      await controls.start({\n        x: finalX - 16,\n        y: finalY - 16,\n        transition: { duration: 0.4, ease: 'easeOut' },\n      });\n\n      updateFinalPosition(finalX, finalY);\n    },\n  }));\n\n  return (\n    <motion.img\n      src={asset(src)}\n      alt=\"star\"\n      onError={(e) => {\n        e.currentTarget.onerror = null;\n        e.currentTarget.src = asset('/stars/default.PNG');\n      }}\n      className=\"absolute w-8 h-8 pointer-events-none\"\n      animate={controls}\n      initial={false}\n      layout={false}\n      style={{ zIndex: 5 }}\n    />\n  );\n});\n\n// ---------- Main component ----------\nexport default function StarJar({ onComplimentUnlocked }) {\n  const [stars, setStars] = useState([]); // [{id, src (relative), x, y, compliment}]\n  const [hasSpawned, setHasSpawned] = useState(false);\n  const [wish, setWish] = useState('');\n  const [showVideo, setShowVideo] = useState(false);\n  const [selectedCompliment, setSelectedCompliment] = useState(null);\n\n  // Intro deck state\n  const [showIntro, setShowIntro] = useState(false);\n  const [introIndex, setIntroIndex] = useState(0);\n  const forewords = [\n    {\n      title: 'Surprise:>',\n      body:\n        \"\",\n      hint: \"Press 'Next' to continue!\",\n    },\n    {\n      title: \"I've been hiding a secret from you...\",\n      body:\n        \"You've been asking me what I've been working on and I didn't want to tell you, but today is finally the day I reveal my deep dark secret to you...\",\n    },\n    {\n      title: 'So',\n      body:\n        'you know I am bad with verbal expressions, and from you showering me with kind words, I know you like them too.',\n    },\n    {\n      title: 'Star Jar Project',\n      body:\n        'I stored everything I like about you in stars. And you are free to unravel them and make me die of embarrassment. You can make a wish to reveal a star whenever you like, and you can open and close the app without losing the stars you have gathered.',\n    },\n    {\n      title: 'Happy birthday!',\n      body:\n        'I hope you like this present and I hope you healthy, happy and big boi.',\n    },\n  ];\n\n  const starRefs = useRef([]);\n\n  // ---- load once on mount ----\n  useEffect(() => {\n    try {\n      const v = localStorage.getItem(KEYS.ver);\n      if (v !== STORAGE_VERSION) {\n        localStorage.setItem(KEYS.ver, STORAGE_VERSION);\n      }\n      const saved = JSON.parse(localStorage.getItem(KEYS.stars) || '[]');\n      if (Array.isArray(saved) && saved.length > 0) {\n        setStars(saved); // saved uses RELATIVE image paths\n        setHasSpawned(true);\n        starRefs.current = saved.map(() => React.createRef());\n      } else {\n        setHasSpawned(false);\n      }\n    } catch (e) {\n      console.warn('Failed to load saved jar:', e);\n    }\n  }, []);\n\n  // ---- show intro if not dismissed and not spawned ----\n  useEffect(() => {\n    const dismissed = localStorage.getItem(INTRO_KEY) === '1';\n    if (!dismissed && !hasSpawned) {\n      setIntroIndex(0);\n      setShowIntro(true);\n    }\n  }, [hasSpawned]);\n\n  // ---- persist when stars change (after spawn) ----\n  useEffect(() => {\n    if (!hasSpawned) return;\n    try {\n      localStorage.setItem(KEYS.stars, JSON.stringify(stars));\n    } catch (e) {\n      console.warn('Failed to save jar:', e);\n    }\n  }, [stars, hasSpawned]);\n\n  // ---- keep refs array aligned with stars array ----\n  useEffect(() => {\n    if (starRefs.current.length !== stars.length) {\n      starRefs.current = stars.map((_, i) => starRefs.current[i] || React.createRef());\n    }\n  }, [stars]);\n\n  const spawnStars = async () => {\n    const generated = [];\n    for (let i = 0; i < compliments.length; i++) {\n      const pos = await getNonOverlappingPosition(generated);\n      generated.push({\n        id: `star-${i}`,\n        src: compliments[i].image, // save RELATIVE path\n        x: pos.x,\n        y: pos.y,\n        compliment: compliments[i].text,\n      });\n    }\n    setStars(generated);\n    setHasSpawned(true);\n    setWish('');\n    setShowVideo(false);\n    starRefs.current = generated.map(() => React.createRef());\n\n    localStorage.setItem(KEYS.stars, JSON.stringify(generated));\n    window.dispatchEvent(new Event('starjar:updated'));\n  };\n\n  // update by ID (not index)\n  const updateStarPosition = (id, x, y) => {\n    setStars((prev) => prev.map((s) => (s.id === id ? { ...s, x, y } : s)));\n  };\n\n  const shakeStars = async () => {\n    if (starRefs.current.length !== stars.length) {\n      starRefs.current = stars.map((_, i) => starRefs.current[i] || React.createRef());\n    }\n    await Promise.all(starRefs.current.map((ref) => ref.current?.shake?.()));\n  };\n\n  const makeWish = async () => {\n    if (!hasSpawned || stars.length === 0) return;\n\n    await shakeStars(); // do motion first\n\n    // pick a star\n    const idx = Math.floor(Math.random() * stars.length);\n    const picked = stars[idx];\n\n    // filename helper: strip cache/query/hash\n    const filename = (url = '') => url.split('/').pop().split('?')[0].split('#')[0];\n\n    const pickedFile = filename(picked.src); // e.g. \"pink1.PNG\"\n    const complimentText = compliments.find((c) => filename(c.image) === pickedFile)?.text;\n    if (!complimentText) return;\n\n    // compute next state BEFORE writing\n    const nextStars = stars.filter((_, i) => i !== idx);\n\n    // keep refs aligned (remove the same index)\n    if (starRefs.current?.length) {\n      starRefs.current.splice(idx, 1);\n    }\n\n    // update storage FIRST so listeners see the latest\n    localStorage.setItem(KEYS.stars, JSON.stringify(nextStars));\n    const prevUnlocked = JSON.parse(localStorage.getItem(KEYS.unlocked) || '[]');\n    const nextUnlocked = [...new Set([...prevUnlocked, complimentText])];\n    localStorage.setItem(KEYS.unlocked, JSON.stringify(nextUnlocked));\n\n    // notify Dex (and any others) to reload\n    window.dispatchEvent(new Event('starjar:updated'));\n\n    // now update UI state\n    setStars(nextStars);\n    setWish(complimentText);\n    setShowVideo(true);\n\n    if (typeof onComplimentUnlocked === 'function') {\n      onComplimentUnlocked(complimentText);\n    }\n  };\n\n  const resetJar = () => {\n    localStorage.removeItem(KEYS.stars);\n    localStorage.removeItem(KEYS.unlocked);\n    // show intro again on reset\n    localStorage.removeItem(INTRO_KEY);\n    setIntroIndex(0);\n    setShowIntro(true);\n\n    setStars([]);\n    setHasSpawned(false);\n    setWish(null);\n    setShowVideo(false);\n    setSelectedCompliment(null);\n    setPasswordInput('');\n    setShowResetModal(false);\n    starRefs.current = [];\n    window.dispatchEvent(new Event('starjar:updated'));\n  };\n\n  const [showResetModal, setShowResetModal] = useState(false);\n  const [passwordInput, setPasswordInput] = useState('');\n  const handlePasswordSubmit = () => {\n    if (passwordInput === 'kakalove0608') {\n      resetJar();\n    } else {\n      alert('Why you trying to break the law');\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col items-center mt-10\">\n      <div className=\"relative w-[300px] h-[300px]\">\n        <img\n          src={asset('/jar/back.PNG')}\n          alt=\"jar back\"\n          className=\"absolute inset-0 w-full h-full object-contain z-0\"\n        />\n\n        {stars.map((star, i) =>\n          star?.src ? (\n            <Star\n              key={star.id}\n              src={star.src} // relative here; Star wraps with asset()\n              x={star.x}\n              y={star.y}\n              ref={starRefs.current[i]}\n              updateFinalPosition={(x, y) => updateStarPosition(star.id, x, y)}\n            />\n          ) : null\n        )}\n\n        <img\n          src={asset('/jar/lid.PNG')}\n          alt=\"jar lid\"\n          className=\"absolute inset-0 w-full h-full object-contain z-10\"\n        />\n      </div>\n\n      <div className=\"flex gap-4 mt-6 flex-wrap justify-center\">\n        {!hasSpawned ? (\n          <motion.button\n            className=\"bg-[#D8D1EF] hover:bg-[#CFC6EA]\n                       text-[#5C5575] text-lg px-6 py-3 rounded-full\n                       shadow-md font-semibold transition\n                       hover:scale-105 duration-200 ease-out\n                       backdrop-blur-sm border border-[#E9E3F9]\"\n            onClick={spawnStars}\n          >\n            Press me!\n          </motion.button>\n        ) : (\n          <>\n            <motion.button\n              className=\"bg-white/30 backdrop-blur-md\n                         border border-[#D1D9EC] text-sm text-[#555]\n                         px-4 py-2 rounded-full shadow-sm\n                         hover:bg-white/50 hover:scale-105 transition\"\n              onClick={shakeStars}\n            >\n              Shake me\n            </motion.button>\n\n            <motion.button\n              className=\"bg-[#bdaddb] hover:bg-[#b2d0f7] text-white\n                         text-lg px-6 py-3 rounded-full font-semibold\n                         shadow-md transition hover:scale-105 disabled:opacity-50\"\n              onClick={makeWish}\n              disabled={stars.length === 0}\n            >\n              Make a wish!\n            </motion.button>\n          </>\n        )}\n      </div>\n\n      <div className=\"mt-7 text-center h-24 flex items-center justify-center\">\n        {showVideo && (\n          <video\n            playsInline\n            autoPlay\n            muted\n            disablePictureInPicture\n            className=\"w-49 h-36 object-contain\"\n            onEnded={() => setShowVideo(false)}\n          >\n            <source src={asset('/stars/unravel.mp4')} type=\"video/mp4\" />\n            Your browser does not support the video tag.\n          </video>\n        )}\n\n        {!showVideo && wish && (\n          <div className=\"text-center flex flex-col items-center gap-2\">\n            <p className=\"text-[#6D679D] text-xl font-semibold\">✨ {wish} ✨</p>\n            <button\n              onClick={() => {\n                const c = compliments.find((cc) => cc.text === wish);\n                const image = c?.image || '/stars/default.PNG';\n\n                setSelectedCompliment({\n                  text: c?.text || wish,\n                  image: asset(image),\n                  description:\n                    c?.description ||\n                    'This star reflects one of your amazing qualities. Keep collecting more!',\n                  locked: false,\n                });\n              }}\n              className=\"mt-1 px-3 py-1 rounded-full text-sm bg-white text-[#6D679D] border border-[#d6d2e8] hover:bg-[#f3f0fa] transition\"\n            >\n              Read more\n            </button>\n          </div>\n        )}\n      </div>\n\n      {selectedCompliment && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30 backdrop-blur-sm\">\n          <div className=\"bg-white rounded-xl shadow-lg p-6 max-w-sm w-full relative text-center\">\n            <button\n              className=\"absolute top-2 right-2 text-gray-400 hover:text-gray-600\"\n              onClick={() => setSelectedCompliment(null)}\n            >\n              ✕\n            </button>\n            <img\n              src={selectedCompliment.image}\n              alt={selectedCompliment.text}\n              className=\"w-16 h-16 mx-auto mb-4\"\n              onError={(e) => {\n                e.currentTarget.onerror = null;\n                e.currentTarget.src = asset('/stars/default.PNG');\n              }}\n            />\n            <h3 className=\"text-lg font-bold text-[#6D679D]\">\n              {selectedCompliment.text}\n            </h3>\n            <p className=\"text-sm text-gray-500 mt-2\">{selectedCompliment.description}</p>\n          </div>\n        </div>\n      )}\n\n      {/* Reset Button Fixed Bottom Right */}\n      {hasSpawned && (\n        <button\n          className=\"fixed bottom-4 right-4 bg-[#D3DCE6] hover:bg-[#C6D0DB] text-sm text-black px-4 py-2 rounded-full shadow z-50\"\n          onClick={() => setShowResetModal(true)}\n        >\n          Reset Jar\n        </button>\n      )}\n\n      {/* Help / About button to reopen intro */}\n      {!showIntro && (\n        <button\n          className=\"fixed bottom-4 left-4 bg-white/80 backdrop-blur-md border text-xs px-2 py-1 rounded-full shadow\"\n          style={{ borderColor: '#E9E3F9', color: '#6D679D' }}\n          onClick={() => setShowIntro(true)}\n          title=\"About this app\"\n        >\n          ?\n        </button>\n      )}\n\n      {/* Password Reset Modal */}\n      {showResetModal && (\n        <div className=\"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50\">\n          <div className=\"bg-white p-6 rounded-lg shadow-lg w-80 text-center\">\n            <h3 className=\"text-lg font-semibold mb-4\">Enter password to reset</h3>\n            <input\n              type=\"password\"\n              value={passwordInput}\n              onChange={(e) => setPasswordInput(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded mb-4\"\n              placeholder=\"Password\"\n            />\n            <div className=\"flex justify-center gap-4\">\n              <button\n                className=\"bg-gray-300 hover:bg-gray-400 text-black px-4 py-2 rounded\"\n                onClick={() => setShowResetModal(false)}\n              >\n                Cancel\n              </button>\n              <button\n                className=\"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded\"\n                onClick={handlePasswordSubmit}\n              >\n                Confirm\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Forewords Slide Card */}\n      <IntroSlideCard\n        open={showIntro}\n        slides={forewords}\n        index={introIndex}\n        setIndex={setIntroIndex}\n        onClose={() => {\n          setShowIntro(false);\n          localStorage.setItem(INTRO_KEY, '1'); // one-time dismiss on close\n        }}\n        onNeverShow={() => {\n          localStorage.setItem(INTRO_KEY, '1');\n          setShowIntro(false);\n        }}\n      />\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}