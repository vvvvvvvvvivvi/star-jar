{"ast":null,"code":"// src/StarJar.js\nimport React,{useEffect,useState,useRef}from'react';import{motion,useAnimation}from'framer-motion';import compliments from'./complimentData';// ---------- asset + storage keys ----------\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const BUILD_VERSION='2025-08-11-1';// bump when you update public assets\nconst asset=p=>`${process.env.PUBLIC_URL}${p.startsWith('/')?p:`/${p}`}?v=${BUILD_VERSION}`;const APP_NS=(process.env.PUBLIC_URL||'')+':starjar';const KEYS={stars:`${APP_NS}:jarStars`,unlocked:`${APP_NS}:unlockedCompliments`,ver:`${APP_NS}:version`};const STORAGE_VERSION='1';// ---------- mask for in-jar collisions ----------\nconst maskImageSrc=asset('/jar/spawn-mask.PNG');const createMaskContext=()=>{return new Promise(resolve=>{const img=new Image();img.src=maskImageSrc;img.onload=()=>{const canvas=document.createElement('canvas');canvas.width=300;canvas.height=300;const ctx=canvas.getContext('2d');if(ctx)ctx.drawImage(img,0,0,300,300);resolve(ctx);};img.onerror=()=>{console.warn('spawn-mask.PNG failed to load:',maskImageSrc);resolve(null);};});};const getNonOverlappingPosition=async function(existing){let radius=arguments.length>1&&arguments[1]!==undefined?arguments[1]:32;const ctx=await createMaskContext();if(!ctx)return{x:150,y:180};const halfSize=radius/2;let attempts=0;while(attempts<1000){const x=Math.floor(Math.random()*300);const y=Math.floor(Math.random()*300);const corners=[{x:x-halfSize,y:y-halfSize},{x:x+halfSize,y:y-halfSize},{x:x-halfSize,y:y+halfSize},{x:x+halfSize,y:y+halfSize}];const allValid=corners.every(_ref=>{let{x,y}=_ref;if(x<0||x>=300||y<0||y>=300)return false;const pixel=ctx.getImageData(x,y,1,1).data;return pixel[3]>=50;});const notTooClose=existing.every(pos=>{const dx=pos.x-x;const dy=pos.y-y;return dx*dx+dy*dy>radius*radius;});if(allValid&&notTooClose)return{x,y};attempts++;}return{x:150,y:180};};// ---------- Star image ----------\nconst Star=/*#__PURE__*/React.forwardRef((_ref2,ref)=>{let{src,x,y,updateFinalPosition}=_ref2;const controls=useAnimation();const[mounted,setMounted]=useState(false);useEffect(()=>{controls.start({x:x-16,y:y-16,scale:[0,1.2,1],transition:{duration:0.0,ease:'easeOut'}});setMounted(true);},[x,y]);// eslint-disable-line react-hooks/exhaustive-deps\nReact.useImperativeHandle(ref,()=>({async shake(){if(!mounted)return;const ctx=await createMaskContext();if(!ctx)return;const starSize=32;const halfSize=starSize/2;let finalX=x;let finalY=y;for(let i=0;i<8;i++){let newX=finalX+(Math.random()-0.5)*20;let newY=finalY+(Math.random()-0.5)*20;const corners=[{x:newX-halfSize,y:newY-halfSize},{x:newX+halfSize,y:newY-halfSize},{x:newX-halfSize,y:newY+halfSize},{x:newX+halfSize,y:newY+halfSize}];const isValid=corners.every(_ref3=>{let{x,y}=_ref3;if(x<0||x>=300||y<0||y>=300)return false;const pixel=ctx.getImageData(x,y,1,1).data;return pixel[3]>=50;});if(!isValid)continue;await controls.start({x:newX-16,y:newY-16,transition:{duration:0.08}});finalX=newX;finalY=newY;}await controls.start({x:finalX-16,y:finalY-16,transition:{duration:0.4,ease:'easeOut'}});updateFinalPosition(finalX,finalY);}}));return/*#__PURE__*/_jsx(motion.img,{src:asset(src)// render-time prefixing\n,alt:\"star\",onError:e=>{e.currentTarget.onerror=null;e.currentTarget.src=asset('/stars/default.PNG');// ensure file exists\n},className:\"absolute w-8 h-8 pointer-events-none\",animate:controls,initial:{x:x-16,y:y-16,scale:0},style:{zIndex:5}});});// ---------- Main component ----------\nexport default function StarJar(_ref4){let{onComplimentUnlocked}=_ref4;const[stars,setStars]=useState([]);// [{id, src (relative), x, y, compliment}]\nconst[hasSpawned,setHasSpawned]=useState(false);const[wish,setWish]=useState('');const[showVideo,setShowVideo]=useState(false);const[selectedCompliment,setSelectedCompliment]=useState(null);const starRefs=useRef([]);const[showResetModal,setShowResetModal]=useState(false);const[passwordInput,setPasswordInput]=useState('');// ---- load once on mount ----\nuseEffect(()=>{try{const v=localStorage.getItem(KEYS.ver);if(v!==STORAGE_VERSION){localStorage.setItem(KEYS.ver,STORAGE_VERSION);}const saved=JSON.parse(localStorage.getItem(KEYS.stars)||'[]');if(Array.isArray(saved)&&saved.length>0){setStars(saved);// saved uses RELATIVE image paths\nsetHasSpawned(true);starRefs.current=saved.map(()=>/*#__PURE__*/React.createRef());}else{setHasSpawned(false);}}catch(e){console.warn('Failed to load saved jar:',e);}},[]);// ---- persist when stars change (after spawn) ----\nuseEffect(()=>{if(!hasSpawned)return;try{localStorage.setItem(KEYS.stars,JSON.stringify(stars));}catch(e){console.warn('Failed to save jar:',e);}},[stars,hasSpawned]);// ---- keep refs array aligned with stars array ----\nuseEffect(()=>{if(starRefs.current.length!==stars.length){starRefs.current=stars.map((_,i)=>starRefs.current[i]||/*#__PURE__*/React.createRef());}},[stars]);const spawnStars=async()=>{const generated=[];for(let i=0;i<compliments.length;i++){const pos=await getNonOverlappingPosition(generated);generated.push({id:`star-${i}`,src:compliments[i].image,// save RELATIVE path\nx:pos.x,y:pos.y,compliment:compliments[i].text});}setStars(generated);setHasSpawned(true);setWish('');setShowVideo(false);starRefs.current=generated.map(()=>/*#__PURE__*/React.createRef());localStorage.setItem(KEYS.stars,JSON.stringify(generated));window.dispatchEvent(new Event('starjar:updated'));};// update by ID (not index)\nconst updateStarPosition=(id,x,y)=>{setStars(prev=>prev.map(s=>s.id===id?{...s,x,y}:s));};const shakeStars=async()=>{if(starRefs.current.length!==stars.length){starRefs.current=stars.map((_,i)=>starRefs.current[i]||/*#__PURE__*/React.createRef());}await Promise.all(starRefs.current.map(ref=>{var _ref$current,_ref$current$shake;return(_ref$current=ref.current)===null||_ref$current===void 0?void 0:(_ref$current$shake=_ref$current.shake)===null||_ref$current$shake===void 0?void 0:_ref$current$shake.call(_ref$current);}));};const makeWish=async()=>{var _compliments$find,_starRefs$current;if(!hasSpawned||stars.length===0)return;await shakeStars();// do motion first\n// pick a star\nconst idx=Math.floor(Math.random()*stars.length);const picked=stars[idx];// filename helper: strip cache/query/hash\nconst filename=function(){let url=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';return url.split('/').pop().split('?')[0].split('#')[0];};const pickedFile=filename(picked.src);// e.g. \"pink1.PNG\"\nconst complimentText=(_compliments$find=compliments.find(c=>filename(c.image)===pickedFile))===null||_compliments$find===void 0?void 0:_compliments$find.text;if(!complimentText)return;// compute next state BEFORE writing\nconst nextStars=stars.filter((_,i)=>i!==idx);// keep refs aligned (remove the same index)\nif((_starRefs$current=starRefs.current)!==null&&_starRefs$current!==void 0&&_starRefs$current.length){starRefs.current.splice(idx,1);}// update storage FIRST so listeners see the latest\nlocalStorage.setItem(KEYS.stars,JSON.stringify(nextStars));const prevUnlocked=JSON.parse(localStorage.getItem(KEYS.unlocked)||'[]');const nextUnlocked=[...new Set([...prevUnlocked,complimentText])];localStorage.setItem(KEYS.unlocked,JSON.stringify(nextUnlocked));// notify Dex (and any others) to reload\nwindow.dispatchEvent(new Event('starjar:updated'));// now update UI state\nsetStars(nextStars);setWish(complimentText);setShowVideo(true);if(typeof onComplimentUnlocked==='function'){onComplimentUnlocked(complimentText);}};const resetJar=()=>{localStorage.removeItem(KEYS.stars);localStorage.removeItem(KEYS.unlocked);setStars([]);setHasSpawned(false);setWish(null);setShowVideo(false);setSelectedCompliment(null);setPasswordInput('');setShowResetModal(false);starRefs.current=[];window.dispatchEvent(new Event('starjar:updated'));};const handlePasswordSubmit=()=>{if(passwordInput==='kakalove0608'){resetJar();}else{alert('Why you trying to break the law');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center mt-10\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-[300px] h-[300px]\",children:[/*#__PURE__*/_jsx(\"img\",{src:asset('/jar/back.PNG'),alt:\"jar back\",className:\"absolute inset-0 w-full h-full object-contain z-0\"}),stars.map((star,i)=>star!==null&&star!==void 0&&star.src?/*#__PURE__*/_jsx(Star,{src:star.src// relative here; Star wraps with asset()\n,x:star.x,y:star.y,ref:starRefs.current[i],updateFinalPosition:(x,y)=>updateStarPosition(star.id,x,y)},star.id):null),/*#__PURE__*/_jsx(\"img\",{src:asset('/jar/lid.PNG'),alt:\"jar lid\",className:\"absolute inset-0 w-full h-full object-contain z-10\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-4 mt-6 flex-wrap justify-center\",children:!hasSpawned?/*#__PURE__*/_jsx(motion.button,{className:\"bg-[#D8D1EF] hover:bg-[#CFC6EA] text-[#5C5575] text-lg px-6 py-3 rounded-full shadow-md font-semibold transition hover:scale-105 duration-200 ease-out backdrop-blur-sm border border-[#E9E3F9]\",onClick:spawnStars,children:\"Press me!\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(motion.button,{className:\"bg-white/30 backdrop-blur-md border border-[#D1D9EC] text-sm text-[#555] px-4 py-2 rounded-full shadow-sm hover:bg-white/50 hover:scale-105 transition\",onClick:shakeStars,children:\"Shake me\"}),/*#__PURE__*/_jsx(motion.button,{className:\"bg-[#bdaddb] hover:bg-[#b2d0f7] text-white text-lg px-6 py-3 rounded-full font-semibold shadow-md transition hover:scale-105 disabled:opacity-50\",onClick:makeWish,disabled:stars.length===0,children:\"Make a wish!\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-7 text-center h-24 flex items-center justify-center\",children:[showVideo&&/*#__PURE__*/_jsxs(\"video\",{playsInline:true,autoPlay:true,muted:true,disablePictureInPicture:true,className:\"w-49 h-36 object-contain\",onEnded:()=>setShowVideo(false),children:[/*#__PURE__*/_jsx(\"source\",{src:asset('/stars/unravel.mp4'),type:\"video/mp4\"}),\"Your browser does not support the video tag.\"]}),!showVideo&&wish&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center flex flex-col items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-[#6D679D] text-xl font-semibold\",children:[\"\\u2728 \",wish,\" \\u2728\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const c=compliments.find(cc=>cc.text===wish);const image=(c===null||c===void 0?void 0:c.image)||'/stars/default.PNG';setSelectedCompliment({text:(c===null||c===void 0?void 0:c.text)||wish,image:asset(image),description:(c===null||c===void 0?void 0:c.description)||'This star reflects one of your amazing qualities. Keep collecting more!',locked:false});},className:\"mt-1 px-3 py-1 rounded-full text-sm bg-white text-[#6D679D] border border-[#d6d2e8] hover:bg-[#f3f0fa] transition\",children:\"Read more\"})]})]}),selectedCompliment&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30 backdrop-blur-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg p-6 max-w-sm w-full relative text-center\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"absolute top-2 right-2 text-gray-400 hover:text-gray-600\",onClick:()=>setSelectedCompliment(null),children:\"\\u2715\"}),/*#__PURE__*/_jsx(\"img\",{src:selectedCompliment.image,alt:selectedCompliment.text,className:\"w-16 h-16 mx-auto mb-4\",onError:e=>{e.currentTarget.onerror=null;e.currentTarget.src=asset('/stars/default.PNG');}}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-[#6D679D]\",children:selectedCompliment.text}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:selectedCompliment.description})]})}),hasSpawned&&/*#__PURE__*/_jsx(\"button\",{className:\"fixed bottom-4 right-4 bg-[#D3DCE6] hover:bg-[#C6D0DB] text-sm text-black px-4 py-2 rounded-full shadow z-50\",onClick:()=>setShowResetModal(true),children:\"Reset Jar\"}),showResetModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-lg w-80 text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Enter password to reset\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:passwordInput,onChange:e=>setPasswordInput(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded mb-4\",placeholder:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center gap-4\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-gray-300 hover:bg-gray-400 text-black px-4 py-2 rounded\",onClick:()=>setShowResetModal(false),children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded\",onClick:handlePasswordSubmit,children:\"Confirm\"})]})]})})]});}","map":{"version":3,"names":["React","useEffect","useState","useRef","motion","useAnimation","compliments","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BUILD_VERSION","asset","p","process","env","PUBLIC_URL","startsWith","APP_NS","KEYS","stars","unlocked","ver","STORAGE_VERSION","maskImageSrc","createMaskContext","Promise","resolve","img","Image","src","onload","canvas","document","createElement","width","height","ctx","getContext","drawImage","onerror","console","warn","getNonOverlappingPosition","existing","radius","arguments","length","undefined","x","y","halfSize","attempts","Math","floor","random","corners","allValid","every","_ref","pixel","getImageData","data","notTooClose","pos","dx","dy","Star","forwardRef","_ref2","ref","updateFinalPosition","controls","mounted","setMounted","start","scale","transition","duration","ease","useImperativeHandle","shake","starSize","finalX","finalY","i","newX","newY","isValid","_ref3","alt","onError","e","currentTarget","className","animate","initial","style","zIndex","StarJar","_ref4","onComplimentUnlocked","setStars","hasSpawned","setHasSpawned","wish","setWish","showVideo","setShowVideo","selectedCompliment","setSelectedCompliment","starRefs","showResetModal","setShowResetModal","passwordInput","setPasswordInput","v","localStorage","getItem","setItem","saved","JSON","parse","Array","isArray","current","map","createRef","stringify","_","spawnStars","generated","push","id","image","compliment","text","window","dispatchEvent","Event","updateStarPosition","prev","s","shakeStars","all","_ref$current","_ref$current$shake","call","makeWish","_compliments$find","_starRefs$current","idx","picked","filename","url","split","pop","pickedFile","complimentText","find","c","nextStars","filter","splice","prevUnlocked","nextUnlocked","Set","resetJar","removeItem","handlePasswordSubmit","alert","children","star","button","onClick","disabled","playsInline","autoPlay","muted","disablePictureInPicture","onEnded","type","cc","description","locked","value","onChange","target","placeholder"],"sources":["/Users/kakalee/Desktop/May projects/lucky-star-jar/src/StarJar.js"],"sourcesContent":["// src/StarJar.js\nimport React, { useEffect, useState, useRef } from 'react';\nimport { motion, useAnimation } from 'framer-motion';\nimport compliments from './complimentData';\n\n// ---------- asset + storage keys ----------\nconst BUILD_VERSION = '2025-08-11-1'; // bump when you update public assets\nconst asset = (p) =>\n  `${process.env.PUBLIC_URL}${p.startsWith('/') ? p : `/${p}`}?v=${BUILD_VERSION}`;\n\nconst APP_NS = (process.env.PUBLIC_URL || '') + ':starjar';\nconst KEYS = {\n  stars: `${APP_NS}:jarStars`,\n  unlocked: `${APP_NS}:unlockedCompliments`,\n  ver: `${APP_NS}:version`,\n};\nconst STORAGE_VERSION = '1';\n\n// ---------- mask for in-jar collisions ----------\nconst maskImageSrc = asset('/jar/spawn-mask.PNG');\n\nconst createMaskContext = () => {\n  return new Promise((resolve) => {\n    const img = new Image();\n    img.src = maskImageSrc;\n\n    img.onload = () => {\n      const canvas = document.createElement('canvas');\n      canvas.width = 300;\n      canvas.height = 300;\n      const ctx = canvas.getContext('2d');\n      if (ctx) ctx.drawImage(img, 0, 0, 300, 300);\n      resolve(ctx);\n    };\n\n    img.onerror = () => {\n      console.warn('spawn-mask.PNG failed to load:', maskImageSrc);\n      resolve(null);\n    };\n  });\n};\n\nconst getNonOverlappingPosition = async (existing, radius = 32) => {\n  const ctx = await createMaskContext();\n  if (!ctx) return { x: 150, y: 180 };\n\n  const halfSize = radius / 2;\n  let attempts = 0;\n\n  while (attempts < 1000) {\n    const x = Math.floor(Math.random() * 300);\n    const y = Math.floor(Math.random() * 300);\n\n    const corners = [\n      { x: x - halfSize, y: y - halfSize },\n      { x: x + halfSize, y: y - halfSize },\n      { x: x - halfSize, y: y + halfSize },\n      { x: x + halfSize, y: y + halfSize },\n    ];\n\n    const allValid = corners.every(({ x, y }) => {\n      if (x < 0 || x >= 300 || y < 0 || y >= 300) return false;\n      const pixel = ctx.getImageData(x, y, 1, 1).data;\n      return pixel[3] >= 50;\n    });\n\n    const notTooClose = existing.every((pos) => {\n      const dx = pos.x - x;\n      const dy = pos.y - y;\n      return dx * dx + dy * dy > radius * radius;\n    });\n\n    if (allValid && notTooClose) return { x, y };\n    attempts++;\n  }\n\n  return { x: 150, y: 180 };\n};\n\n// ---------- Star image ----------\nconst Star = React.forwardRef(({ src, x, y, updateFinalPosition }, ref) => {\n  const controls = useAnimation();\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    controls.start({\n      x: x - 16,\n      y: y - 16,\n      scale: [0, 1.2, 1],\n      transition: { duration: 0.0, ease: 'easeOut' },\n    });\n    setMounted(true);\n  }, [x, y]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  React.useImperativeHandle(ref, () => ({\n    async shake() {\n      if (!mounted) return;\n\n      const ctx = await createMaskContext();\n      if (!ctx) return;\n\n      const starSize = 32;\n      const halfSize = starSize / 2;\n\n      let finalX = x;\n      let finalY = y;\n\n      for (let i = 0; i < 8; i++) {\n        let newX = finalX + (Math.random() - 0.5) * 20;\n        let newY = finalY + (Math.random() - 0.5) * 20;\n\n        const corners = [\n          { x: newX - halfSize, y: newY - halfSize },\n          { x: newX + halfSize, y: newY - halfSize },\n          { x: newX - halfSize, y: newY + halfSize },\n          { x: newX + halfSize, y: newY + halfSize },\n        ];\n\n        const isValid = corners.every(({ x, y }) => {\n          if (x < 0 || x >= 300 || y < 0 || y >= 300) return false;\n          const pixel = ctx.getImageData(x, y, 1, 1).data;\n          return pixel[3] >= 50;\n        });\n\n        if (!isValid) continue;\n\n        await controls.start({\n          x: newX - 16,\n          y: newY - 16,\n          transition: { duration: 0.08 },\n        });\n\n        finalX = newX;\n        finalY = newY;\n      }\n\n      await controls.start({\n        x: finalX - 16,\n        y: finalY - 16,\n        transition: { duration: 0.4, ease: 'easeOut' },\n      });\n\n      updateFinalPosition(finalX, finalY);\n    },\n  }));\n\n  return (\n    <motion.img\n      src={asset(src)} // render-time prefixing\n      alt=\"star\"\n      onError={(e) => {\n        e.currentTarget.onerror = null;\n        e.currentTarget.src = asset('/stars/default.PNG'); // ensure file exists\n      }}\n      className=\"absolute w-8 h-8 pointer-events-none\"\n      animate={controls}\n      initial={{ x: x - 16, y: y - 16, scale: 0 }}\n      style={{ zIndex: 5 }}\n    />\n  );\n});\n\n// ---------- Main component ----------\nexport default function StarJar({ onComplimentUnlocked }) {\n  const [stars, setStars] = useState([]); // [{id, src (relative), x, y, compliment}]\n  const [hasSpawned, setHasSpawned] = useState(false);\n  const [wish, setWish] = useState('');\n  const [showVideo, setShowVideo] = useState(false);\n  const [selectedCompliment, setSelectedCompliment] = useState(null);\n\n  const starRefs = useRef([]);\n  const [showResetModal, setShowResetModal] = useState(false);\n  const [passwordInput, setPasswordInput] = useState('');\n\n  // ---- load once on mount ----\n  useEffect(() => {\n    try {\n      const v = localStorage.getItem(KEYS.ver);\n      if (v !== STORAGE_VERSION) {\n        localStorage.setItem(KEYS.ver, STORAGE_VERSION);\n      }\n      const saved = JSON.parse(localStorage.getItem(KEYS.stars) || '[]');\n      if (Array.isArray(saved) && saved.length > 0) {\n        setStars(saved); // saved uses RELATIVE image paths\n        setHasSpawned(true);\n        starRefs.current = saved.map(() => React.createRef());\n      } else {\n        setHasSpawned(false);\n      }\n    } catch (e) {\n      console.warn('Failed to load saved jar:', e);\n    }\n  }, []);\n\n  // ---- persist when stars change (after spawn) ----\n  useEffect(() => {\n    if (!hasSpawned) return;\n    try {\n      localStorage.setItem(KEYS.stars, JSON.stringify(stars));\n    } catch (e) {\n      console.warn('Failed to save jar:', e);\n    }\n  }, [stars, hasSpawned]);\n\n  // ---- keep refs array aligned with stars array ----\n  useEffect(() => {\n    if (starRefs.current.length !== stars.length) {\n      starRefs.current = stars.map((_, i) => starRefs.current[i] || React.createRef());\n    }\n  }, [stars]);\n\n  const spawnStars = async () => {\n    const generated = [];\n    for (let i = 0; i < compliments.length; i++) {\n      const pos = await getNonOverlappingPosition(generated);\n      generated.push({\n        id: `star-${i}`,\n        src: compliments[i].image, // save RELATIVE path\n        x: pos.x,\n        y: pos.y,\n        compliment: compliments[i].text,\n      });\n    }\n    setStars(generated);\n    setHasSpawned(true);\n    setWish('');\n    setShowVideo(false);\n    starRefs.current = generated.map(() => React.createRef());\n\n    localStorage.setItem(KEYS.stars, JSON.stringify(generated));\n    window.dispatchEvent(new Event('starjar:updated'));\n  };\n\n  // update by ID (not index)\n  const updateStarPosition = (id, x, y) => {\n    setStars((prev) => prev.map((s) => (s.id === id ? { ...s, x, y } : s)));\n  };\n\n  const shakeStars = async () => {\n    if (starRefs.current.length !== stars.length) {\n      starRefs.current = stars.map((_, i) => starRefs.current[i] || React.createRef());\n    }\n    await Promise.all(starRefs.current.map((ref) => ref.current?.shake?.()));\n  };\n\n  const makeWish = async () => {\n    if (!hasSpawned || stars.length === 0) return;\n\n    await shakeStars(); // do motion first\n\n    // pick a star\n    const idx = Math.floor(Math.random() * stars.length);\n    const picked = stars[idx];\n\n    // filename helper: strip cache/query/hash\n    const filename = (url = '') => url.split('/').pop().split('?')[0].split('#')[0];\n\n    const pickedFile = filename(picked.src); // e.g. \"pink1.PNG\"\n    const complimentText = compliments.find((c) => filename(c.image) === pickedFile)?.text;\n    if (!complimentText) return;\n\n    // compute next state BEFORE writing\n    const nextStars = stars.filter((_, i) => i !== idx);\n\n    // keep refs aligned (remove the same index)\n    if (starRefs.current?.length) {\n      starRefs.current.splice(idx, 1);\n    }\n\n    // update storage FIRST so listeners see the latest\n    localStorage.setItem(KEYS.stars, JSON.stringify(nextStars));\n    const prevUnlocked = JSON.parse(localStorage.getItem(KEYS.unlocked) || '[]');\n    const nextUnlocked = [...new Set([...prevUnlocked, complimentText])];\n    localStorage.setItem(KEYS.unlocked, JSON.stringify(nextUnlocked));\n\n    // notify Dex (and any others) to reload\n    window.dispatchEvent(new Event('starjar:updated'));\n\n    // now update UI state\n    setStars(nextStars);\n    setWish(complimentText);\n    setShowVideo(true);\n\n    if (typeof onComplimentUnlocked === 'function') {\n      onComplimentUnlocked(complimentText);\n    }\n  };\n\n  const resetJar = () => {\n    localStorage.removeItem(KEYS.stars);\n    localStorage.removeItem(KEYS.unlocked);\n    setStars([]);\n    setHasSpawned(false);\n    setWish(null);\n    setShowVideo(false);\n    setSelectedCompliment(null);\n    setPasswordInput('');\n    setShowResetModal(false);\n    starRefs.current = [];\n    window.dispatchEvent(new Event('starjar:updated'));\n  };\n\n  const handlePasswordSubmit = () => {\n    if (passwordInput === 'kakalove0608') {\n      resetJar();\n    } else {\n      alert('Why you trying to break the law');\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col items-center mt-10\">\n      <div className=\"relative w-[300px] h-[300px]\">\n        <img\n          src={asset('/jar/back.PNG')}\n          alt=\"jar back\"\n          className=\"absolute inset-0 w-full h-full object-contain z-0\"\n        />\n\n        {stars.map((star, i) =>\n          star?.src ? (\n            <Star\n              key={star.id}\n              src={star.src} // relative here; Star wraps with asset()\n              x={star.x}\n              y={star.y}\n              ref={starRefs.current[i]}\n              updateFinalPosition={(x, y) => updateStarPosition(star.id, x, y)}\n            />\n          ) : null\n        )}\n\n        <img\n          src={asset('/jar/lid.PNG')}\n          alt=\"jar lid\"\n          className=\"absolute inset-0 w-full h-full object-contain z-10\"\n        />\n      </div>\n\n      <div className=\"flex gap-4 mt-6 flex-wrap justify-center\">\n        {!hasSpawned ? (\n          <motion.button\n            className=\"bg-[#D8D1EF] hover:bg-[#CFC6EA]\n                       text-[#5C5575] text-lg px-6 py-3 rounded-full\n                       shadow-md font-semibold transition\n                       hover:scale-105 duration-200 ease-out\n                       backdrop-blur-sm border border-[#E9E3F9]\"\n            onClick={spawnStars}\n          >\n            Press me!\n          </motion.button>\n        ) : (\n          <>\n            <motion.button\n              className=\"bg-white/30 backdrop-blur-md\n                         border border-[#D1D9EC] text-sm text-[#555]\n                         px-4 py-2 rounded-full shadow-sm\n                         hover:bg-white/50 hover:scale-105 transition\"\n              onClick={shakeStars}\n            >\n              Shake me\n            </motion.button>\n\n            <motion.button\n              className=\"bg-[#bdaddb] hover:bg-[#b2d0f7] text-white\n                         text-lg px-6 py-3 rounded-full font-semibold\n                         shadow-md transition hover:scale-105 disabled:opacity-50\"\n              onClick={makeWish}\n              disabled={stars.length === 0}\n            >\n              Make a wish!\n            </motion.button>\n          </>\n        )}\n      </div>\n\n      <div className=\"mt-7 text-center h-24 flex items-center justify-center\">\n        {showVideo && (\n          <video\n            playsInline\n            autoPlay\n            muted\n            disablePictureInPicture\n            className=\"w-49 h-36 object-contain\"\n            onEnded={() => setShowVideo(false)}\n          >\n            <source src={asset('/stars/unravel.mp4')} type=\"video/mp4\" />\n            Your browser does not support the video tag.\n          </video>\n        )}\n\n        {!showVideo && wish && (\n          <div className=\"text-center flex flex-col items-center gap-2\">\n            <p className=\"text-[#6D679D] text-xl font-semibold\">✨ {wish} ✨</p>\n            <button\n              onClick={() => {\n                const c = compliments.find((cc) => cc.text === wish);\n                const image = c?.image || '/stars/default.PNG';\n\n                setSelectedCompliment({\n                  text: c?.text || wish,\n                  image: asset(image),\n                  description:\n                    c?.description ||\n                    'This star reflects one of your amazing qualities. Keep collecting more!',\n                  locked: false,\n                });\n              }}\n              className=\"mt-1 px-3 py-1 rounded-full text-sm bg-white text-[#6D679D] border border-[#d6d2e8] hover:bg-[#f3f0fa] transition\"\n            >\n              Read more\n            </button>\n          </div>\n        )}\n      </div>\n\n      {selectedCompliment && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30 backdrop-blur-sm\">\n          <div className=\"bg-white rounded-xl shadow-lg p-6 max-w-sm w-full relative text-center\">\n            <button\n              className=\"absolute top-2 right-2 text-gray-400 hover:text-gray-600\"\n              onClick={() => setSelectedCompliment(null)}\n            >\n              ✕\n            </button>\n            <img\n              src={selectedCompliment.image}\n              alt={selectedCompliment.text}\n              className=\"w-16 h-16 mx-auto mb-4\"\n              onError={(e) => {\n                e.currentTarget.onerror = null;\n                e.currentTarget.src = asset('/stars/default.PNG');\n              }}\n            />\n            <h3 className=\"text-lg font-bold text-[#6D679D]\">\n              {selectedCompliment.text}\n            </h3>\n            <p className=\"text-sm text-gray-500 mt-2\">{selectedCompliment.description}</p>\n          </div>\n        </div>\n      )}\n\n      {/* Reset Button Fixed Bottom Right */}\n      {hasSpawned && (\n        <button\n          className=\"fixed bottom-4 right-4 bg-[#D3DCE6] hover:bg-[#C6D0DB] text-sm text-black px-4 py-2 rounded-full shadow z-50\"\n          onClick={() => setShowResetModal(true)}\n        >\n          Reset Jar\n        </button>\n      )}\n\n      {/* Password Reset Modal */}\n      {showResetModal && (\n        <div className=\"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50\">\n          <div className=\"bg-white p-6 rounded-lg shadow-lg w-80 text-center\">\n            <h3 className=\"text-lg font-semibold mb-4\">Enter password to reset</h3>\n            <input\n              type=\"password\"\n              value={passwordInput}\n              onChange={(e) => setPasswordInput(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded mb-4\"\n              placeholder=\"Password\"\n            />\n            <div className=\"flex justify-center gap-4\">\n              <button\n                className=\"bg-gray-300 hover:bg-gray-400 text-black px-4 py-2 rounded\"\n                onClick={() => setShowResetModal(false)}\n              >\n                Cancel\n              </button>\n              <button\n                className=\"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded\"\n                onClick={handlePasswordSubmit}\n              >\n                Confirm\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}